webpackJsonp([2],{2247:function(e,t,a){var i=a("Hxdr"),n=a("JyYQ"),s=a("yzuE"),o=a("NGEn");e.exports=function(e,t){return(o(e)?i:s)(e,n(t,3))}},"2KnG":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),s=a("mvHQ"),r=a.n(s),o=a("Gu7T"),l=a.n(o),d=a("rVNw"),c=a("fZjL"),u=a.n(c),p=a("gyMJ"),h=a("qwrG"),m={props:{"default-chosed-node-init":{type:Object,default:function(){return{}}}},data:function(){return{defaultProps:{children:"subNodes",label:"orgName"},menuDefaultProps:{children:"subNode",label:"org"},defaultExpandedKeys:[],treeData:{},menuList:[],menuDefaultChosed:[],activeNodeId:"",chosedOrgList:[],privaligeInfo:{}}},components:{noData:h.a},methods:{renderContent:function(e,t){var a=this,i=(t.root,t.node,t.data);return e("div",{style:{display:"inline-block",width:"100%"},class:{"title-wrap":!0,"active-node":i.id===this.activeNodeId},on:{click:function(){a.getMenuPrivalige(i)}}},[e("span",{class:{"title-class":!0},directives:[{name:"w-title",value:i.orgName}]},i.orgName)])},menuRenderContent:function(e,t){t.root,t.node;var a=t.data;return this.chosedOrgList.includes(this.activeNodeId)?this.$set(a,"disabled",!1):this.$set(a,"disabled",!0),e("div",{style:{display:"inline-block",width:"100%"},class:{"title-wrap":!0}},[e("span",{class:{"title-class":!0},directives:[{name:"w-title",value:a.orgName}]},this.$t(a.privCode))])},getOrgTree:function(){var t=this;p.a.post("getOrgTree",{manageType:"manage",showScene:"privilege"}).then(function(e){e.success?(t.treeData=e.data?e.data:{},t.treeData&&0<u()(t.treeData).length&&t.getMenuPrivalige(t.treeData)):t.treeData={}})},getMenuPrivalige:function(e){var t=this;this.activeNodeId=e.id,p.a.post("getAllPrivilege",{orgId:e.id}).then(function(e){e.success?t.menuList=e.data?e.data:[]:t.menuList=[]}).finally(function(){t.setDefaultMenuChosed()})},treeCheck:function(e,t){var a=this,i=(t.checkedNodes,t.checkedKeys);i.includes(e.id)||(this.privaligeInfo[e.id]=[],this.$nextTick(function(){a.$refs.menuTree.setCheckedNodes([])})),this.chosedOrgList=i},menuCheckChange:function(e,t){t.checkedKeys;var a=t.checkedNodes,i=t.halfCheckedNodes;this.privaligeInfo[this.activeNodeId]=[].concat(l()(a.map(function(e){return n()({},e,{choseStatus:""})})),l()(i.map(function(e){return n()({},e,{choseStatus:"half"})})))},setDefaultMenuChosed:function(){var e=this;if(this.activeNodeId in this.privaligeInfo){var t=this.privaligeInfo[this.activeNodeId]?this.privaligeInfo[this.activeNodeId].filter(function(e){return"half"!==e.choseStatus}):[];this.$nextTick(function(){e.$refs.menuTree.setCheckedNodes(t)})}else this.$nextTick(function(){e.$refs.menuTree.setCheckedNodes([])})},getMangePrivalige:function(){var e=[];for(var t in this.privaligeInfo)for(var a=0,i=this.privaligeInfo[t].length;a<i;a++)e.push({privOrg:t,privCode:this.privaligeInfo[t][a].privCode,privType:this.privaligeInfo[t][a].privType,path:this.privaligeInfo[t][a].path,ranges:this.privaligeInfo[t][a].ranges,orgType:"manage",choseStatus:this.privaligeInfo[t][a].choseStatus});return e}},computed:{companyData:function(){return 0<u()(this.treeData).length?[this.treeData]:[]}},created:function(){this.getOrgTree()},watch:{defaultChosedNodeInit:function(e,t){var a=this;if(e&&0<u()(e).length){this.privaligeInfo=e;var i=[];for(var n in this.defaultChosedNodeInit)i.push(n);this.chosedOrgList=i,this.$nextTick(function(){a.$refs.nodeTree.setCheckedKeys(i)})}}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"manage-role-set"},[a("div",{staticClass:"node-list"},[a("div",{staticClass:"node-name"},[e._v("\n            经营权限：\n        ")]),e._v(" "),a("div",{staticClass:"node-info"},[0<e.companyData.length?a("el-tree",{ref:"nodeTree",attrs:{data:e.companyData,"node-key":"id","check-strictly":"","show-checkbox":"","default-expand-all":!0,props:e.defaultProps,"default-expanded-keys":e.defaultExpandedKeys,"expand-on-click-node":!1,"render-content":e.renderContent},on:{check:e.treeCheck}}):a("no-data")],1)]),e._v(" "),a("div",{staticClass:"menu-list"},[a("div",{staticClass:"node-name"},[e._v("\n            菜单权限：\n        ")]),e._v(" "),a("div",{staticClass:"node-info"},[a("el-tree",{directives:[{name:"show",rawName:"v-show",value:0<e.menuList.length,expression:"menuList.length > 0"}],ref:"menuTree",attrs:{data:e.menuList,"node-key":"privCode",disabled:"","show-checkbox":"","default-expand-all":!0,props:e.menuDefaultProps,"default-expanded-keys":e.menuDefaultChosed,"expand-on-click-node":!1,"render-content":e.menuRenderContent},on:{check:e.menuCheckChange}}),e._v(" "),a("no-data",{directives:[{name:"show",rawName:"v-show",value:e.menuList.length<1,expression:"menuList.length < 1"}]})],1)])])},staticRenderFns:[]};var v=a("VU/8")(m,f,!1,function(e){a("3txf")},"data-v-67e9d5f9",null).exports,g={props:{"default-chosed-node-init":{type:Object,default:function(){return{}}}},data:function(){return{defaultProps:{children:"subNodes",label:"orgName"},menuDefaultProps:{children:"subNode",label:"org"},defaultExpandedKeys:[],treeData:{},menuList:[],menuDefaultChosed:[],activeNodeId:"",chosedOrgList:[],privaligeInfo:{}}},components:{noData:h.a},methods:{renderContent:function(e,t){var a=this,i=(t.root,t.node,t.data);return e("div",{style:{display:"inline-block",width:"100%"},class:{"title-wrap":!0,"active-node":i.id===this.activeNodeId},on:{click:function(){a.getMenuPrivalige(i)}}},[e("span",{class:{"title-class":!0},directives:[{name:"w-title",value:i.orgName}]},i.orgName)])},menuRenderContent:function(e,t){t.root,t.node;var a=t.data;return this.chosedOrgList.includes(this.activeNodeId)?this.$set(a,"disabled",!1):this.$set(a,"disabled",!0),e("div",{style:{display:"inline-block",width:"100%"},class:{"title-wrap":!0}},[e("span",{class:{"title-class":!0},directives:[{name:"w-title",value:a.orgName}]},this.$t(a.privCode))])},getOrgTree:function(){var t=this;p.a.post("getOrgTree",{manageType:"economic",showScene:"privilege"}).then(function(e){e.success?(t.treeData=e.data?e.data:{},t.treeData&&0<u()(t.treeData).length&&t.getMenuPrivalige(t.treeData)):t.treeData={}})},getMenuPrivalige:function(e){var t=this;this.activeNodeId=e.id,p.a.post("getAllPrivilege",{orgId:e.id}).then(function(e){e.success?t.menuList=e.data?e.data:[]:t.menuList=[]}).finally(function(){t.setDefaultMenuChosed()})},treeCheck:function(e,t){var a=this,i=(t.checkedNodes,t.checkedKeys);i.includes(e.id)||(this.privaligeInfo[e.id]=[],this.$nextTick(function(){a.$refs.menuTree.setCheckedNodes([])})),this.chosedOrgList=i},menuCheckChange:function(e,t){t.checkedKeys;var a=t.checkedNodes,i=t.halfCheckedNodes;this.privaligeInfo[this.activeNodeId]=[].concat(l()(a.map(function(e){return n()({},e,{choseStatus:""})})),l()(i.map(function(e){return n()({},e,{choseStatus:"half"})})))},setDefaultMenuChosed:function(){var e=this;if(this.activeNodeId in this.privaligeInfo){var t=this.privaligeInfo[this.activeNodeId]?this.privaligeInfo[this.activeNodeId].filter(function(e){return"half"!==e.choseStatus}):[];this.$nextTick(function(){e.$refs.menuTree.setCheckedNodes(t)})}else this.$nextTick(function(){e.$refs.menuTree.setCheckedNodes([])})},getMangePrivalige:function(){var e=[];for(var t in this.privaligeInfo)for(var a=0,i=this.privaligeInfo[t].length;a<i;a++)e.push({privOrg:t,privCode:this.privaligeInfo[t][a].privCode,privType:this.privaligeInfo[t][a].privType,path:this.privaligeInfo[t][a].path,ranges:this.privaligeInfo[t][a].ranges,orgType:"economic",choseStatus:this.privaligeInfo[t][a].choseStatus});return e}},computed:{companyData:function(){return 0<u()(this.treeData).length?[this.treeData]:[]}},created:function(){this.getOrgTree()},watch:{defaultChosedNodeInit:function(e,t){var a=this;if(e&&0<u()(e).length){this.privaligeInfo=e;var i=[];for(var n in this.defaultChosedNodeInit)i.push(n);this.chosedOrgList=i,this.$nextTick(function(){a.$refs.nodeTree.setCheckedKeys(i)})}}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"finace-role-set"},[a("div",{staticClass:"node-list"},[a("div",{staticClass:"node-name"},[e._v("\n            财务权限：\n        ")]),e._v(" "),a("div",{staticClass:"node-info"},[0<e.companyData.length?a("el-tree",{ref:"nodeTree",attrs:{data:e.companyData,"node-key":"id","check-strictly":"","show-checkbox":"","default-expand-all":!0,props:e.defaultProps,"default-expanded-keys":e.defaultExpandedKeys,"expand-on-click-node":!1,"render-content":e.renderContent},on:{check:e.treeCheck}}):a("no-data")],1)]),e._v(" "),a("div",{staticClass:"menu-list"},[a("div",{staticClass:"node-name"},[e._v("\n            菜单权限：\n        ")]),e._v(" "),a("div",{staticClass:"node-info"},[a("el-tree",{directives:[{name:"show",rawName:"v-show",value:0<e.menuList.length,expression:"menuList.length > 0"}],ref:"menuTree",attrs:{data:e.menuList,"node-key":"privCode",disabled:"","show-checkbox":"","default-expand-all":!0,props:e.menuDefaultProps,"default-expanded-keys":e.menuDefaultChosed,"expand-on-click-node":!1,"render-content":e.menuRenderContent},on:{check:e.menuCheckChange}}),e._v(" "),a("no-data",{directives:[{name:"show",rawName:"v-show",value:e.menuList.length<1,expression:"menuList.length < 1"}]})],1)])])},staticRenderFns:[]};var b=a("VU/8")(g,y,!1,function(e){a("s8XD")},"data-v-6f121c0c",null).exports,_=a("//Fk"),w=a.n(_),C=a("DB50"),k=[{title:"",width:80,field:"check"},{title:"员工姓名",minWidth:200,field:"nickName"},{title:"员工账号",minWidth:150,field:"loginName"},{title:"部门",minWidth:150,field:"deptName"},{title:"操作",width:120,field:"operate"}],$={props:{value:{type:Boolean,default:!1}},components:{tableCom:C.a},data:function(){return{columns:k.slice(0,-1),tableData:[],employeeSelected:[]}},methods:{save:function(){this.$emit("updateSelected",this.employeeSelected),this.cancel()},cancel:function(){this.$emit("input",!1)},changeValue:function(e){this.$emit("input",e)},visibleChange:function(e){},queryList:function(){var t=this;p.a.post("getEmployeeList",{pageNo:1,pageSize:99999}).then(function(e){e.success?t.tableData=e.data?e.data.data:[]:t.tableData=[]})},selectedChange:function(e){this.employeeSelected=e}}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{staticClass:"add-employee",attrs:{title:"Title","mask-closable":!1,value:e.value,width:600,"class-name":"vertical-center-modal"},on:{input:e.changeValue,"on-visible-change":e.visibleChange}},[a("div",{staticClass:"target-class",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[e._v(e._s(e.$t("新增员工")))])]),e._v(" "),a("div",{staticClass:"selection"},[e._v("\n        已选："+e._s(e.employeeSelected.length)+"人\n    ")]),e._v(" "),e.value?a("table-com",{attrs:{"column-data":e.columns,"table-data":e.tableData,border:!0,height:500},on:{"query-data":e.queryList,"selection-change":e.selectedChange},scopedSlots:e._u([{key:"column0",fn:function(e){return a("el-table-column",{attrs:{label:e.title,type:"selection",width:e.width,"min-width":e.minWidth}})}}])}):e._e(),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticClass:"ivu-btn-90px",attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("save")))]),e._v(" "),a("Button",{staticClass:"ivu-btn-90px",attrs:{type:"ghost"},on:{click:e.cancel}},[e._v(e._s(e.$t("cancel")))])],1)],1)},staticRenderFns:[]};var N=a("VU/8")($,D,!1,function(e){a("l+nR")},null,null).exports,S=a("g5kf"),I={props:{"employee-list":{type:Array,default:function(){return[]}},"role-id":{type:String,default:""}},data:function(){return{columns:k,tableData:[],addVisible:!1,employeeChosed:[],delEmployees:[]}},components:{tableCom:C.a,addEmployee:N,delModal:S.a},methods:{queryList:function(){},updateSelected:function(s){var o=this;if(0<this.tableData.length)for(var e=function(n,e){new w.a(function(e,t){for(var a=0,i=o.tableData.length;a<i;a++)s[n].id===o.tableData[a].id&&t();e()}).then(function(){o.tableData.push(s[n])})},t=0,a=s.length;t<a;t++)e(t);else this.tableData=JSON.parse(r()(s));this.$emit("updateSelected",this.tableData)},addEmployee:function(){this.addVisible=!0},del:function(e){var t=this;this.delEmployees=e,this.$refs.delModal.show({title:"删除员工",confirmCallback:function(){t.confirmDel(e)}})},confirmDel:function(e){for(var t=this,a=[],i=[],n=0,s=e.length;n<s;n++)for(var o=this.tableData.length-1;0<=o;o--)e[n].id===this.tableData[o].id?a.push(e[n].id):i.push(this.tableData[o]);p.a.post("deleteRoleOfEmps",{roleId:this.roleId,accountIds:a.join(",")}).then(function(e){e.success?(t.$Message.success("删除成功"),t.tableData=i,t.$emit("updateSelected",t.tableData)):t.$Message.error(e.message||"删除失败")})},selectedChange:function(e){this.employeeChosed=e},resetEmployeeData:function(){this.tableData=[],this.$emit("updateSelected",this.tableData)}},watch:{employeeList:function(e,t){e&&(this.tableData=JSON.parse(r()(e)),this.$emit("updateSelected",this.tableData))}}},x={render:function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{staticClass:"employee-privalige-set"},[i("div",{staticClass:"btn-area"},[i("Button",{attrs:{type:"primary"},on:{click:a.addEmployee}},[a._v("增加员工")]),a._v(" "),i("Button",{attrs:{type:"error",disabled:a.employeeChosed.length<1},on:{click:function(e){a.del(a.employeeChosed)}}},[a._v("批量删除")])],1),a._v(" "),i("table-com",{attrs:{"column-data":a.columns,"table-data":a.tableData,border:!0,"auto-height":!0,"table-com-min-height":300},on:{"query-data":a.queryList,"selection-change":a.selectedChange},scopedSlots:a._u([{key:"column0",fn:function(e){return i("el-table-column",{attrs:{label:e.title,type:"selection",width:e.width,"min-width":e.minWidth}})}},{key:"column4",fn:function(e){return i("el-table-column",{attrs:{label:e.title,"show-overflow-tooltip":"",width:e.width,"min-width":e.minWidth},scopedSlots:a._u([{key:"default",fn:function(t){return[i("ul",{staticClass:"operate-list"},[i("li",{on:{click:function(e){a.del([t.row])}}},[a._v("删除")])])]}}])})}}])}),a._v(" "),i("add-employee",{on:{updateSelected:a.updateSelected},model:{value:a.addVisible,callback:function(e){a.addVisible=e},expression:"addVisible"}}),a._v(" "),i("del-modal",{ref:"delModal"},[i("div",{staticClass:"del-tips"},[i("Icon",{attrs:{type:"help-circled"}}),a._v(" "),i("span",{staticClass:"red-bale"},[a._v("您将解除员工："),i("span",{staticStyle:{color:"#F7981C"}},[a._v(a._s(a.delEmployees.map(function(e){return e.nickName}).join(",")))]),a._v("等"+a._s(a.delEmployees.length)+"位员工权限。"),i("span",{staticStyle:{color:"#ed3f14"}},[a._v("本操作不可撤销，")])]),a._v(" "),i("span",[a._v("是否确认删除？")])],1)])],1)},staticRenderFns:[]};var P=a("VU/8")(I,x,!1,function(e){a("giLV")},"data-v-254b0452",null).exports,G=a("NYxO"),M={mixins:[a("7dVJ").a],data:function(){return{beforeRouterList:[{name:"rolePermission",router:{name:"rolePermission"}}],formData:{roleName:""},selectedEmployees:[],privaliges:{manage:[],economic:[]},ruleValidate:{roleName:[{required:!0,message:this.$t("inputField",{field:"角色名称"}),trigger:"blur"},{max:50,message:this.$t("errorMaxLength",{field:"角色名称",length:50}),trigger:"blur"}]},roleId:"",type:"add",employeeList:[],manageDefaultChosed:{},economicDefaultChosed:{}}},components:{breadCrumbHead:d.a,manageRoleSet:v,finaceRoleSet:b,employeeRoleList:P},methods:{setSelectedEmployee:function(e){this.selectedEmployees=e},save:function(){var t=this,a=[].concat(l()(this.$refs.mangeRole.getMangePrivalige()),l()(this.$refs.finaceRole.getMangePrivalige()));a.length<=0?this.$Message.warning("请先添加菜单权限"):this.$refs.formValidate.validate(function(e){e&&(t.roleId?t.modifyRole(a):t.addRole(a))})},addRole:function(e){var t=this;p.a.post("addRole",{privileges:r()(e),roleName:this.formData.roleName,accountIds:this.selectedEmployees.map(function(e){return e.id})}).then(function(e){e.success?(t.$Message.success("新增成功"),t.$router.push({name:"rolePermission"})):t.$Message.error(e.message||"新增失败")})},queryRoleDetail:function(){var t=this;p.a.post("findById",{id:this.roleId}).then(function(e){e.success?(t.employeeList=e.data?e.data.employeeVos:[],t.formData.roleName=e.data?e.data.role.roleName:"",t.getMangePrivalige(e.data.privModelList)):(t.employeeList=[],t.formData.roleName="")})},getParams:function(e){e.type?(this.type=e.type,"edit"===this.type&&(this.roleId=e.id,this.queryRoleDetail())):(this.type="add",this.roleId="")},getMangePrivalige:function(e){this.manageDefaultChosed={},this.economicDefaultChosed={};for(var t=0,a=e.length;t<a;t++)"manage"===e[t].orgType?this.manageDefaultChosed[e[t].privOrg]?this.manageDefaultChosed[e[t].privOrg].push({path:e[t].path,privCode:e[t].privCode,privType:e[t].privType,ranges:e[t].ranges,choseStatus:e[t].choseStatus}):this.manageDefaultChosed[e[t].privOrg]=[{path:e[t].path,privCode:e[t].privCode,privType:e[t].privType,ranges:e[t].ranges,choseStatus:e[t].choseStatus}]:"economic"===e[t].orgType&&(this.economicDefaultChosed[e[t].privOrg]?this.economicDefaultChosed[e[t].privOrg].push({path:e[t].path,privCode:e[t].privCode,privType:e[t].privType,ranges:e[t].ranges,choseStatus:e[t].choseStatus}):this.economicDefaultChosed[e[t].privOrg]=[{path:e[t].path,privCode:e[t].privCode,privType:e[t].privType,ranges:e[t].ranges,choseStatus:e[t].choseStatus}])},modifyRole:function(e){var t=this;p.a.post("updateRole",{roleId:this.roleId,privileges:r()(e),roleName:this.formData.roleName,accountIds:this.selectedEmployees.map(function(e){return e.id})}).then(function(e){e.success?(t.$Message.success("修改成功"),t.$router.push({name:"rolePermission"})):t.$Message.error(e.message||"修改失败")})},copyRole:function(){this.type="copy",this.roleId="",this.formData.roleName="",this.$refs.employee.resetEmployeeData()},cancel:function(){this.$router.push({name:"rolePermission"})}},computed:n()({},Object(G.mapGetters)({manageOrgs:"manageOrgs"}),{localeRouter:function(){return"add"===this.type?"addRole":"edit"===this.type?"roleDetail":"copy"===this.type?"copyRole":""}})},O={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-role"},[a("bread-crumb-head",{attrs:{"locale-router":t.localeRouter,"before-router-list":t.beforeRouterList}}),t._v(" "),a("div",{staticClass:"content"},[a("Form",{ref:"formValidate",attrs:{model:t.formData,rules:t.ruleValidate}},[a("i-row",[a("i-col",{attrs:{span:"10"}},[a("FormItem",{attrs:{label:"公司/景区名称","label-width":120}},[a("Input",{staticStyle:{width:"280px"},attrs:{value:t.manageOrgs.orgName,disabled:""}})],1)],1),t._v(" "),a("i-col",{attrs:{span:"10"}},[a("FormItem",{attrs:{label:"角色名称","label-width":100,prop:"roleName"}},[a("Input",{staticStyle:{width:"280px"},model:{value:t.formData.roleName,callback:function(e){t.$set(t.formData,"roleName",e)},expression:"formData.roleName"}})],1)],1),t._v(" "),"edit"===t.type?a("i-col",{staticStyle:{"text-align":"right"},attrs:{span:"4"}},[a("Button",{attrs:{type:"primary"},on:{click:t.copyRole}},[t._v("复制角色")])],1):t._e()],1)],1),t._v(" "),a("manage-role-set",{ref:"mangeRole",attrs:{"default-chosed-node-init":t.manageDefaultChosed}}),t._v(" "),a("div",{staticClass:"gap"}),t._v(" "),a("finace-role-set",{ref:"finaceRole",attrs:{"default-chosed-node-init":t.economicDefaultChosed}}),t._v(" "),a("employee-role-list",{ref:"employee",attrs:{"role-id":t.roleId,"employee-list":t.employeeList},on:{updateSelected:t.setSelectedEmployee}})],1),t._v(" "),a("div",{staticClass:"btn-area"},[a("Button",{staticClass:"ivu-btn-108px",attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),t._v(" "),a("Button",{staticClass:"ivu-btn-108px",attrs:{type:"ghost"},on:{click:t.cancel}},[t._v("取消")])],1)],1)},staticRenderFns:[]};var T=a("VU/8")(M,O,!1,function(e){a("MGxg")},"data-v-154298b1",null);t.default=T.exports},"3gxS":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),n=a.n(i),s=a("gyMJ"),o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"deleteList",attrs:{"class-name":"vertical-center-modal","mask-closable":!1,width:420},on:{"on-cancel":t.hide},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("div",{staticClass:"ivu-modal-header-inner",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.deleteName))])]),t._v(" "),a("div",{staticClass:"content"},[a("i",{staticClass:"iconfont icon-help delete-icon"}),t._v(" "),a("div",{staticClass:"text"},[a("span",[t._v("您正在"+t._s(t.deleteName)+"：")]),t._v(" "),a("span",{directives:[{name:"w-title",rawName:"v-w-title",value:t.name,expression:"name"}],staticClass:"name",domProps:{innerHTML:t._s(t.name)}})]),t._v(" "),a("div",{staticClass:"text"},[a("span",{staticClass:"tips"},[t._v("本操作不可撤销，")]),t._v(" "),a("span",[t._v("是否确认删除？")])])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[[a("i-button",{staticClass:"ivu-btn-error",attrs:{type:"primary"},on:{click:t.submit}},[t._v("确认")]),t._v(" "),a("i-button",{attrs:{type:"ghost"},on:{click:t.hide}},[t._v(t._s(t.$t("cancel")))])]],2)])},staticRenderFns:[]};var r=a("VU/8")({components:{},props:["deleteName","name"],data:function(){return{visible:!1,readonly:!1,loading:!1}},computed:{},created:function(){},watch:{},methods:{show:function(e){this.visible=!0},hide:function(){this.visible=!1},submit:function(){this.$emit("deletions"),this.visible=!1}}},o,!1,function(e){a("LESN")},"data-v-de251a54",null).exports,l=a("DB50"),d=a("TLh+"),c=a("oebo"),u={components:{tableCom:l.a,deleteList:r},data:function(){return{queryParams:{pageNo:1,pageSize:d.e.pageDefaultSize},filterParam:{keyword:""},columnData:c.a.filter(function(e,t){return"rolePrivilege"!==e.field}),tableData:[],totalCount:0,deleteName:this.$t("删除员工"),name:"",scopeRowData:{}}},methods:{queryList:function(){var t=this;s.a.post("getEmployeeList",this.queryParams).then(function(e){e.success&&(e.data&&e.data.data?(t.tableData=e.data.data,t.totalCount=e.data.totalRow):(t.tableData=[],t.totalCount=0))})},handleSearch:function(){this.queryParams.pageNo=1,n()(this.queryParams,this.filterParam),this.queryList()},getNewPartner:function(e,t){this.$router.replace({name:"addEmployee",query:{type:e},params:{employeeItem:t}})},deleteEmployee:function(e){this.scopeRowData=e,this.name=e.nickName,this.$refs.delListModal.show()},handleDeletions:function(){var t=this;s.a.post("deletedEmployee",{accountIds:this.scopeRowData.id}).then(function(e){e.success&&(t.$Message.success(t.$t("successTip",{tip:t.$t("del")})),t.handleSearch())})}},computed:{},created:function(){}},p={render:function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{staticClass:"partner"},[i("div",{staticClass:"filter-box"},[i("Button",{staticStyle:{float:"left","margin-right":"10px"},attrs:{type:"primary",icon:"md-add",size:"default"},on:{click:function(e){a.getNewPartner("add")}}},[i("span",{staticClass:"add-icon"},[a._v("+ "+a._s(a.$t("新增员工")))])]),a._v(" "),i("Input",{staticClass:"input-field",attrs:{icon:"ios-search",placeholder:a.$t("请输入任意信息进行查询")},on:{"on-enter":a.handleSearch,"on-click":a.handleSearch},model:{value:a.filterParam.keyword,callback:function(e){a.$set(a.filterParam,"keyword","string"==typeof e?e.trim():e)},expression:"filterParam.keyword"}})],1),a._v(" "),i("div",[i("table-com",{attrs:{ofsetHeight:120,"show-pagination":!0,"column-data":a.columnData,"table-data":a.tableData,"total-count":a.totalCount,"page-no-d":a.queryParams.pageNo,"page-size-d":a.queryParams.pageSize,border:!0},on:{"update:pageNoD":function(e){a.$set(a.queryParams,"pageNo",e)},"update:pageSizeD":function(e){a.$set(a.queryParams,"pageSize",e)},"query-data":a.queryList},scopedSlots:a._u([{key:"column6",fn:function(e){return i("el-table-column",{attrs:{fixed:"right",label:e.title,width:130,"min-width":e.minWidth},scopedSlots:a._u([{key:"default",fn:function(t){return[i("span",{staticClass:"modify-info",on:{click:function(e){a.getNewPartner("modify",t.row)}}},[a._v(a._s(a.$t("modify")))]),a._v(" "),i("span",{staticClass:"divide-line"}),a._v(" "),i("span",{staticClass:"del-info",on:{click:function(e){a.deleteEmployee(t.row)}}},[a._v(a._s(a.$t("del")))])]}}])})}}])})],1),a._v(" "),i("delete-list",{ref:"delListModal",attrs:{deleteName:a.deleteName,name:a.name},on:{deletions:a.handleDeletions}})],1)},staticRenderFns:[]};var h=a("VU/8")(u,p,!1,function(e){a("5Z3v")},"data-v-917994ea",null);t.default=h.exports},"3iph":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("DB50"),n=[{title:"角色权限",minWidth:200,field:"key"},{title:"员工人数",minWidth:150,field:"amount"},{title:"操作",width:120,field:"operate"}],s=a("gyMJ"),o={components:{tableCom:i.a},data:function(){return{tableData:[],keyWrod:"",columns:n,pageNo:1,pageSize:10,totalCount:0}},methods:{queryList:function(){var t=this;s.a.post("queryRoles",{keyword:this.keyWrod,pageNo:this.pageNo,pageSize:this.pageSize}).then(function(e){e.success?(t.tableData=e.data?e.data.data:[],t.totalCount=e.data.totalRow):(t.tableData=[],t.totalCount=0)})},toDetail:function(e){this.$router.push({name:"addRole",params:{id:e.id,type:"edit"}})},addRole:function(){this.$router.push({name:"addRole",params:{type:"add"}})}}},r={render:function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{staticClass:"partner"},[i("div",{staticClass:"orgHeader"},[i("Button",{attrs:{type:"primary"},on:{click:a.addRole}},[a._v("新增角色")]),a._v(" "),i("Input",{staticStyle:{width:"353px"},attrs:{placeholder:"请输入任意信息进行查询",icon:"ios-search"},on:{"on-click":a.queryList,"on-enter":a.queryList},model:{value:a.keyWrod,callback:function(e){a.keyWrod="string"==typeof e?e.trim():e},expression:"keyWrod"}})],1),a._v(" "),i("div",{staticClass:"content"},[i("table-com",{attrs:{"column-data":a.columns,"table-data":a.tableData,border:!0,"page-no-d":a.pageNo,"show-pagination":!0,"page-size-d":a.pageSize,"total-count":a.totalCount,"ofset-height":120},on:{"update:pageNoD":function(e){a.pageNo=e},"update:pageSizeD":function(e){a.pageSize=e},"query-data":a.queryList},scopedSlots:a._u([{key:"column2",fn:function(e){return i("el-table-column",{attrs:{label:e.title,"show-overflow-tooltip":"",width:e.width,"min-width":e.minWidth},scopedSlots:a._u([{key:"default",fn:function(t){return[i("ul",{staticClass:"operate-list"},[i("li",{on:{click:function(e){a.toDetail(t.row)}}},[a._v("详情")])])]}}])})}}])})],1)])},staticRenderFns:[]};var l=a("VU/8")(o,r,!1,function(e){a("PbjP")},null,null);t.default=l.exports},"3owm":function(e,t,a){"use strict";var i={components:{},props:{colParams:Object,filters:Object},data:function(){return{selected:null}},computed:{colFilter:function(){switch(this.colParams.property){case"signTime":return this.filters.stateFilter.forEach(function(e){e.text=e.name}),this.filters.stateFilter;case"warn":return this.filters.alertFilter.forEach(function(e){e.text=e.name}),this.filters.alertFilter}}},created:function(){},mounted:function(){},watch:{},methods:{getCommand:function(e){this.selected=e.$index,e.state?this.$emit("state-filter",e.state):this.$emit("alert-filter",e.alert)}}},n={render:function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{staticClass:"seriesCourse-filterDrop"},[i("el-dropdown",{attrs:{trigger:"click",placement:"bottom-start"},on:{command:a.getCommand}},[i("span",{staticClass:"el-dropdown-link"},[a._v("\n            "+a._s(a.colParams.label)),i("i",{staticClass:"iconfont icon-filter"})]),a._v(" "),i("el-dropdown-menu",{staticClass:"filter-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[a._l(a.colFilter,function(e,t){return i("el-dropdown-item",{key:t,class:[{"active-cls":a.selected===t}],attrs:{command:Object.assign(e,{prop:a.colParams.property,$index:t})}},[a._v("\n                "+a._s(e.text)+"\n            ")])}),a._v(" "),i("el-dropdown-item",[a._v(" aaa")]),a._v(" "),i("el-dropdown-item",[a._v(" bbb")])],2)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("C9sb")},null,null);t.a=s.exports},"3txf":function(e,t){},"4U8W":function(e,t){},"51bk":function(e,t){},"5Z3v":function(e,t){},"5m77":function(e,t){},"8Nst":function(e,t){},"9Ur+":function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n});var i=[{title:"合作伙伴编码",width:200,field:"partnerId"},{title:"合作伙伴名称",minWidth:155,field:"channelName"},{title:"销售渠道分组",minWidth:155,field:"saleGroupName"},{title:"合作协议起始日期",minWidth:160,field:"startDate"},{title:"合作协议结束日期",minWidth:160,field:"endDate"},{title:"协议状态",minWidth:120,field:"status"},{title:"remark",minWidth:200,field:"description"},{title:"operate",width:180,enWidth:220,field:""}],n=[{title:"自营渠道编码",width:200,field:"partnerId"},{title:"自营渠道名称",minWidth:125,field:"channelName"},{title:"销售渠道分组",minWidth:125,field:"saleGroupName"},{title:"自营渠道类型",minWidth:160,field:"type"},{title:"URL/服务器名称",minWidth:160,field:"serverUrl"},{title:"状态",minWidth:120,field:"status"},{title:"remark",minWidth:200,field:"description"},{title:"operate",width:180,enWidth:220,field:""}]},APCF:function(e,t){},ArGh:function(e,t){},C9sb:function(e,t){},KT7M:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),s=a("gyMJ"),o=a("DB50"),r=[{title:"",width:60,field:"check"},{title:"款台ID",minWidth:200,field:"id"},{title:"核销/销售款台名称",minWidth:200,field:"channelName"},{title:"款台类型",minWidth:150,field:"checkerType"},{title:"服务器名称",minWidth:150,field:"serverUrl"},{title:"所属分组",minWidth:150,field:"checkGroupName"},{title:"操作",width:210,field:"operate"}],l=a("g5kf"),d=a("TLh+"),c={props:{orgGroupList:{type:Array,default:function(){return[]}},saleGroupSelected:{type:Array,default:function(){return[]}}},data:function(){return{batchOperate:d.o,formData:{selectOrgId:""},bathChangeGroupShow:!1,ruleValidate:{selectOrgId:[{required:!0,message:this.$t("selectField",{msg:"销售分组"}),trigger:"change"}]}}},methods:{handleCommand:function(e){this.bathChangeGroupShow=!1,"outGroup"===e.value?this.$emit("handle-out-group"):"toOtherGroup"===e.value&&(this.bathChangeGroupShow=!0)},batchChangeOrg:function(){var t=this;this.$refs.formData.validate(function(e){e&&(t.$emit("handle-remove-group",t.formData.selectOrgId),t.bathChangeGroupShow=!1)})},popperHide:function(){this.$refs.formData.resetFields()}}},u={render:function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("Poptip",{attrs:{placement:"bottom-start",width:"312",transfer:"","popper-class":"select-group"},on:{"on-popper-hide":a.popperHide},model:{value:a.bathChangeGroupShow,callback:function(e){a.bathChangeGroupShow=e},expression:"bathChangeGroupShow"}},[i("el-dropdown",{attrs:{trigger:"click",placement:"bottom-start",size:"medium"},on:{command:a.handleCommand},nativeOn:{click:function(e){e.stopPropagation()}}},[i("Button",{staticStyle:{float:"left"},attrs:{type:"ghost"}},[a._v(a._s(a.$t("batchOperate")))]),a._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},a._l(a.batchOperate,function(e,t){return i("el-dropdown-item",{key:t,attrs:{disabled:a.saleGroupSelected.length<1,command:e}},[a._v(a._s(a.$t(e.label))+"\n            ")])}))],1),a._v(" "),i("div",{attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"name"},[a._v("将所选核销设备移至分组")]),a._v(" "),i("Form",{ref:"formData",attrs:{model:a.formData,rules:a.ruleValidate}},[i("FormItem",{attrs:{prop:"selectOrgId"}},[i("Select",{staticStyle:{width:"240px"},attrs:{transfer:""},model:{value:a.formData.selectOrgId,callback:function(e){a.$set(a.formData,"selectOrgId",e)},expression:"formData.selectOrgId"}},a._l(a.orgGroupList,function(e){return i("Option",{directives:[{name:"w-title",rawName:"v-w-title",value:e.groupName,expression:"item.groupName"}],key:e.id,staticClass:"name-select",attrs:{value:e.id,label:e.groupName}})}))],1)],1),a._v(" "),i("div",{staticClass:"btn-area"},[i("Button",{attrs:{type:"primary"},on:{click:a.batchChangeOrg}},[a._v("确定")]),a._v(" "),i("Button",{attrs:{type:"ghost"},on:{click:function(e){a.bathChangeGroupShow=!1}}},[a._v("取消")])],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(c,u,!1,function(e){a("rwFe")},"data-v-3e9f5055",null).exports,h={data:function(){return{addGroupPopVisible:!1,ruleValidate:{orgName:[{required:!0,message:this.$t("inputField",{field:"分组名称"}),trigger:"blur"},{max:100,message:this.$t("errorMaxLength",{field:"分组名称",length:100}),trigger:"blur"}]},formData:{orgName:""}}},methods:{addOrgName:function(){var t=this;this.$refs.formData.validate(function(e){e&&s.a.post("addOrUpdateOrgGroup",{groupType:"check",groupName:t.formData.orgName}).then(function(e){e.success?(t.$Message.success("新增核销设备分组:"+t.formData.orgName+"成功"),t.$emit("fresh-data")):t.$Message.error("0004"===e.code?t.$t("checkNameError",{field:t.formData.orgName}):"新增失败")}).finally(function(){t.addGroupPopVisible=!1})})},addGroup:function(e){this.addGroupPopVisible=!0},popperHide:function(){this.$refs.formData.resetFields()}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Poptip",{staticStyle:{float:"left"},attrs:{placement:"bottom-start",width:"312",transfer:"","popper-class":"add-group"},on:{"on-popper-hide":t.popperHide},model:{value:t.addGroupPopVisible,callback:function(e){t.addGroupPopVisible=e},expression:"addGroupPopVisible"}},[a("Button",{staticClass:"ivu-btn-108px",attrs:{type:"primary",icon:"ios-plus-empty"},on:{click:t.addGroup}},[t._v("\n        新增分组\n    ")]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"add-group"},[a("div",{staticClass:"name"},[t._v("新增分组名称")]),t._v(" "),a("Form",{ref:"formData",attrs:{model:t.formData,rules:t.ruleValidate}},[a("FormItem",{attrs:{prop:"orgName"}},[a("Input",{attrs:{autofocus:""},model:{value:t.formData.orgName,callback:function(e){t.$set(t.formData,"orgName","string"==typeof e?e.trim():e)},expression:"formData.orgName"}})],1)],1),t._v(" "),a("div",{staticClass:"btn-area"},[a("Button",{attrs:{type:"primary"},on:{click:t.addOrgName}},[t._v("确定")]),t._v(" "),a("Button",{attrs:{type:"ghost"},on:{click:function(e){t.addGroupPopVisible=!1}}},[t._v("取消")])],1)],1)])],1)},staticRenderFns:[]};var f=a("VU/8")(h,m,!1,function(e){a("4U8W")},"data-v-58501046",null).exports,v=a("mvHQ"),g=a.n(v),y=a("nnhM"),b={components:{delModal:l.a,editModal:y.a},props:{orgGroupList:{type:Array,default:function(){return[]}}},data:function(){return{groupType:"-1",currentGroup:{},ruleValidate:{orgName:[{required:!0,message:this.$t("inputField",{field:"分组名称"}),trigger:"blur"},{max:100,message:this.$t("errorMaxLength",{field:"分组名称",length:100}),trigger:"blur"}]},formData:{orgName:"",orgId:""}}},methods:{editOrgType:function(e,t){var a=this;e.stopPropagation(),this.$set(t,"edit",!t.edit),this.formData.orgName=t.groupName,this.formData.orgId=t.id,document.body.click(),this.$refs.editModal.show({title:"修改分组名称",confirmCallback:function(){a.confirmChangeOrgname()}})},delGroupShowModal:function(e,t){var a=this;t.stopPropagation(),this.currentGroup=e,this.$refs.delGroupModal.show({title:"删除分组",confirmCallback:function(){a.delGroup(e)}}),document.body.click()},delGroup:function(t){var a=this;s.a.post("deleteItemGroup",{groupId:t.id}).then(function(e){e.success?(a.$Message.success("删除分组:"+t.groupName+"成功"),t.id===a.groupType&&(a.groupType="-1",a.$emit("update:groupType",a.groupType)),a.$emit("fresh-data"),a.$emit("fresh-channel")):a.$Message.error("删除失败")})},groupChange:function(){this.$emit("update:groupType",this.groupType),this.$emit("fresh-channel")},confirmChangeOrgname:function(){var t=this;s.a.post("addOrUpdateOrgGroup",{id:this.formData.orgId,groupType:"check",groupName:this.formData.orgName}).then(function(e){e.success?(t.$Message.success("修改成功"),t.$emit("fresh-data"),t.$emit("fresh-channel")):t.$Message.error("修改失败")}).finally(function(){t.$refs.editModal.hide()})}},computed:{allGroupList:function(){var e=[];return this.orgGroupList&&0<this.orgGroupList.length?(e=JSON.parse(g()(this.orgGroupList))).push({groupName:"未分组",id:"-2",stay:!0}):e.push({groupName:"未分组",id:"-2",stay:!0}),e.unshift({groupName:"全部分组",id:"-1",stay:!0}),e}},created:function(){this.$emit("update:groupType",this.groupType)}},_={render:function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{staticClass:"group-list-main"},[i("Select",{staticClass:"group-list",staticStyle:{width:"280px","z-index":"2000"},on:{"on-change":a.groupChange},model:{value:a.groupType,callback:function(e){a.groupType=e},expression:"groupType"}},a._l(a.allGroupList,function(t){return i("Option",{key:t.id,attrs:{value:t.id,label:t.groupName}},[i("div",{staticClass:"group-list"},[[i("span",{directives:[{name:"w-title",rawName:"v-w-title",value:t.groupName,expression:"item.groupName"}],staticClass:"label-text"},[a._v(a._s(t.groupName))]),a._v(" "),!0!==t.stay?i("span",{staticClass:"iconfont icon-edit",on:{click:function(e){a.editOrgType(e,t)}}}):a._e(),a._v(" "),!0!==t.stay?i("span",{staticClass:"iconfont icon-delete",on:{click:function(e){a.delGroupShowModal(t,e)}}}):a._e()]],2)])})),a._v(" "),i("del-modal",{ref:"delGroupModal"},[i("div",{staticClass:"del-tips"},[i("Icon",{attrs:{type:"help-circled"}}),a._v(" "),i("span",{staticClass:"red-bale"},[a._v("您正在删除分组：\n            "),i("span",{staticStyle:{color:"#f8a334"}},[a._v(a._s(a.currentGroup.groupName))]),a._v(" 本组的渠道将被全部移至‘未分组’，"),i("br"),a._v(" "),i("span",{staticStyle:{color:"#EB6751"}},[a._v("本操作不可撤销")]),a._v("，确认删除？\n            ")])],1)]),a._v(" "),i("edit-modal",{ref:"editModal"},[i("Form",{ref:"formData",attrs:{model:a.formData,rules:a.ruleValidate}},[i("FormItem",{attrs:{prop:"orgName",label:"修改分组名称"}},[i("Input",{staticStyle:{width:"280px"},model:{value:a.formData.orgName,callback:function(e){a.$set(a.formData,"orgName","string"==typeof e?e.trim():e)},expression:"formData.orgName"}})],1)],1)],1)],1)},staticRenderFns:[]};var w=a("VU/8")(b,_,!1,function(e){a("Uoqz")},"data-v-7d75035c",null).exports,C={props:{rowData:{type:Object,default:function(){return{}}},orgGroupList:{type:Array,default:function(){return[]}},value:{type:Boolean,default:!1}},data:function(){return{ruleValidate:{selectOrgId:[{required:!0,message:this.$t("selectField",{msg:"销售分组"}),trigger:"change"}]},formData:{selectOrgId:""}}},methods:{changeOrg:function(){var t=this;this.$refs.formData.validate(function(e){e&&(t.$emit("move-channel-group",[{checkGroupId:t.formData.selectOrgId,id:t.rowData.id}]),t.$emit("input",!1))})},popperHide:function(){this.$refs.formData.resetFields()}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Poptip",{attrs:{placement:"right",width:"312",value:t.value,transfer:"","popper-class":"select-group"},on:{"on-popper-hide":t.popperHide}},[a("span",{on:{click:function(e){t.$emit("input",!0)}}},[t._v("移至其它分组")]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"name"},[t._v("将所选核销设备移至分组")]),t._v(" "),a("Form",{ref:"formData",attrs:{model:t.formData,rules:t.ruleValidate}},[a("FormItem",{attrs:{prop:"selectOrgId"}},[a("Select",{staticStyle:{width:"240px"},attrs:{transfer:""},model:{value:t.formData.selectOrgId,callback:function(e){t.$set(t.formData,"selectOrgId",e)},expression:"formData.selectOrgId"}},t._l(t.orgGroupList,function(e){return a("Option",{key:e.id,attrs:{value:e.id,label:e.groupName}})}))],1)],1),t._v(" "),a("div",{staticClass:"btn-area"},[a("Button",{attrs:{type:"primary"},on:{click:t.changeOrg}},[t._v("确定")]),t._v(" "),a("Button",{attrs:{type:"ghost"},on:{click:function(e){t.$emit("input",!1)}}},[t._v("取消")])],1)],1)])},staticRenderFns:[]};var $=a("VU/8")(C,k,!1,function(e){a("Kbrc")},"data-v-92d2ac08",null).exports,D=a("NYxO"),N={components:{tableCom:o.a,delModal:l.a,batchOpertate:p,addGroup:f,groupSelect:w,moveGroup:$},data:function(){return{tableData:[],orgGroupList:[],columns:r,pageNo:1,pageSize:10,totalCount:0,currentGroup:{},batchOperate:d.o,saleGroupSelected:[],groupType:""}},methods:{getOrgGroupList:function(){var t=this;s.a.post("getOrgGroupList",{groupType:"check"}).then(function(e){e.success?t.orgGroupList=e.data?e.data:[]:t.orgGroupList=[]})},queryList:function(){var t=this;s.a.post("getCheckItemPage",{groupId:"-2"===this.groupType?"":this.groupType,pageNo:this.pageNo,pageSize:this.pageSize,orgId:this.manageOrgs.id}).then(function(e){e.success?(t.tableData=e.data?e.data.data:[],t.totalCount=e.data.totalRow):(t.tableData=[],t.totalCount=0)})},batchMoveChannelGroup:function(e){var t=this;s.a.post("batchMoveItemGroup",e,{headers:{"Content-Type":"application/json;charset-UTF-8"}}).then(function(e){e.success?(t.$Message.success("移动成功"),t.queryList()):t.$Message.error("移动失败")})},removeGroup:function(e){var t=this;this.$refs.delModal.show({title:"提示",confirmCallback:function(){t.batchMoveChannelGroup(e)}})},selectedChange:function(e){this.saleGroupSelected=e},channelRemove:function(e){e.checkGroupId&&this.removeGroup([{checkGroupId:"",id:e.id}])},handleOutGroup:function(){this.removeGroup(this.saleGroupSelected.map(function(e){return{checkGroupId:"",id:e.id}}))},handleRemoveGroup:function(t){this.batchMoveChannelGroup(this.saleGroupSelected.map(function(e){return{checkGroupId:t,id:e.id}}))},moveChannelGroup:function(e){this.batchMoveChannelGroup(e)}},created:function(){this.getOrgGroupList()},computed:n()({},Object(D.mapGetters)({manageOrgs:"manageOrgs"}))},S={render:function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{staticClass:"check-group"},[i("div",{staticClass:"orgHeader"},[i("add-group",{on:{"fresh-data":a.getOrgGroupList}}),a._v(" "),i("batch-opertate",{attrs:{orgGroupList:a.orgGroupList,saleGroupSelected:a.saleGroupSelected},on:{"handle-out-group":a.handleOutGroup,"handle-remove-group":a.handleRemoveGroup}}),a._v(" "),i("group-select",{attrs:{groupType:a.groupType,orgGroupList:a.orgGroupList},on:{"update:groupType":function(e){a.groupType=e},"fresh-data":a.getOrgGroupList,"fresh-channel":a.queryList}})],1),a._v(" "),i("div",{staticClass:"content"},[a.groupType?i("table-com",{attrs:{"column-data":a.columns,"table-data":a.tableData,border:!0,"page-no-d":a.pageNo,"show-pagination":!0,"page-size-d":a.pageSize,"total-count":a.totalCount,"ofset-height":120},on:{"update:pageNoD":function(e){a.pageNo=e},"update:pageSizeD":function(e){a.pageSize=e},"query-data":a.queryList,"selection-change":a.selectedChange},scopedSlots:a._u([{key:"column0",fn:function(e){return i("el-table-column",{attrs:{label:e.title,type:"selection",width:e.width,"min-width":e.minWidth}})}},{key:"column3",fn:function(e){return i("el-table-column",{attrs:{label:e.title,"show-overflow-tooltip":"",width:e.width,"min-width":e.minWidth},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n                    "+a._s(a.$t("check"===e.row.checkerType?"verifyCashierType":"sale"===e.row.checkerType?"verifySaleType":"verifySaleAndCashierType"))+"\n                ")]}}])})}},{key:"column5",fn:function(e){return i("el-table-column",{attrs:{label:e.title,"show-overflow-tooltip":"",width:e.width,"min-width":e.minWidth},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n                    "+a._s(e.row.checkGroupId?e.row.checkGroupName:"未分组")+"\n                ")]}}])})}},{key:"column6",fn:function(e){return i("el-table-column",{attrs:{label:e.title,"show-overflow-tooltip":"",width:e.width,"min-width":e.minWidth},scopedSlots:a._u([{key:"default",fn:function(t){return[i("ul",{staticClass:"operate-list"},[i("li",[i("move-group",{attrs:{rowData:t.row,orgGroupList:a.orgGroupList},on:{"move-channel-group":a.moveChannelGroup},model:{value:t.row.visible,callback:function(e){a.$set(t.row,"visible",e)},expression:"scoped.row.visible"}})],1),a._v(" "),i("li",{class:{disabled:!t.row.checkGroupId},on:{click:function(e){a.channelRemove(t.row)}}},[a._v("移出分组")])])]}}])})}}])}):a._e()],1),a._v(" "),i("del-modal",{ref:"delModal"},[i("div",{staticClass:"del-tips"},[i("Icon",{attrs:{type:"help-circled"}}),a._v(" "),i("span",{staticClass:"red-bale"},[a._v("将所选核销设备从本分组移出后，将列入未分组")])],1)])],1)},staticRenderFns:[]};var I=a("VU/8")(N,S,!1,function(e){a("Z57Y")},null,null);t.default=I.exports},Kbrc:function(e,t){},LESN:function(e,t){},M6Wl:function(e,t,a){var i=a("rpnb"),n=a("ktak");e.exports=function(e,t){return e&&i(e,t,n)}},MGxg:function(e,t){},OUjh:function(e,t){},PbjP:function(e,t){},Uoqz:function(e,t){},VcRh:function(e,t){},Z57Y:function(e,t){},b3yf:function(e,t){},eYVi:function(e,t){},giLV:function(e,t){},knPP:function(e,t){},"l+M+":function(e,t){},"l+nR":function(e,t){},orne:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("fZjL"),n=a.n(i),s=a("rVNw"),o=a("woOf"),r=a.n(o),l=a("mvHQ"),d=a.n(l),c=a("gyMJ"),u=a("gykg"),p=a.n(u),h=a("TLh+"),m=a("YEFv"),f=a("2247"),v=a.n(f),g={props:["employeeInfo"],components:{},data:function(){var i=this,e={mobile:function(e,t,a){m.validator.isMobile(t)?a():a(new Error("请输入正确的手机号码"))},orgName:function(e,t,a){t&&!i.employee.deptId?a(new Error("该部门不存在")):a()},emoji:function(e,t,a){t&&t.isUtf16()?a(new Error(i.$t("errorIrregular"))):a()}};return{dateOption:{disabledDate:function(e){return e&&(e.format("yyyy-MM-dd")<"1900-01-01"||e.format("yyyy-MM-dd")>(new Date).format("yyyy-MM-dd"))}},enumData:{department:[],nativePlace:[],privileges:[]},employee:{deptId:"",loginName:"",password:"",nickName:"",phone:"",sex:"",birthday:"",provinceId:"",address:"",descript:"",roleIds:"",status:"valid"},rolePrivileges:[],roleKeyword:"",matchedData:[],genderEnum:h.g,oldPwd:"",activeGroupItem:{},roleInOrg:[],menuInRole:[],activeRoleInOrg:{},roleNames:"",ruleValidate:{deptId:[{required:!0,message:"请选择部门",trigger:"change"},{validator:e.orgName,trigger:"change"}],loginName:[{required:!0,message:"登录名不能为空",trigger:"blur"},{type:"string",max:20,message:"登录名不能多于20个字符",trigger:"blur"},{validator:e.emoji,trigger:"blur"}],nickName:[{required:!0,message:"姓名不能为空",trigger:"blur"},{type:"string",max:20,message:"姓名不能多于20个字符",trigger:"blur"},{validator:e.emoji,trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{validator:e.emoji,trigger:"blur"}],phone:[{required:!0,message:"手机号不能为空",trigger:"blur"},{validator:e.mobile,trigger:"blur"}],address:[{type:"string",max:20,message:"籍贯地址不能多于20个字符",trigger:"blur"},{validator:e.emoji,trigger:"blur"}],descript:[{type:"string",max:100,message:"备注不能多于100个字符",trigger:"blur"},{validator:e.emoji,trigger:"blur"}]}}},watch:{employeeInfo:{handler:function(e,t){this.isEdit&&e.id&&this.getEmployeeDetail(e.id)},immediate:!0}},computed:{isEdit:function(){return this.$route.query.type&&"modify"==this.$route.query.type}},methods:{customValid:function(e,t){var a=this;this.employee.birthday=e,this.$nextTick(function(){a.$refs.formValidate.validateField(t)})},formValidateFunc:function(){var t=this;this.$refs.formValidate.validate(function(e){e&&t.saveEmployee()})},init:function(){var a=this;[{apiKey:"queryDepartments",dataKey:"department"},{apiKey:"getProvinceList",dataKey:"nativePlace"},{apiKey:"queryRoleList",dataKey:"privileges"}].forEach(function(e,t){a.getFieldInitData(e.apiKey,e.dataKey)})},getFieldInitData:function(e,t){var a=this;c.a.post(e).then(function(e){e.success&&(a.enumData[t]=e.data||[],"privileges"==t&&(a.matchedData=JSON.parse(d()(a.enumData[t]))))})},getAllPrivilege:function(){c.a.post("getAllPrivilege",{orgId:this.$store.state.manageOrgs.id}).then(function(e){})},saveEmployee:function(e){var t=this;t.oldPwd!==t.employee.password&&(this.employee.password=p()(this.employee.password).toString()),this.employee.birthday=new Date(this.employee.birthday).format("yyyy-MM-dd"),c.a.post("addOrUpdateEmployee",this.employee).then(function(e){e.success?(t.$Message.success(t.isEdit?t.$t("编辑员工成功！"):t.$t("新增员工成功！")),t.$router.push({name:"employee"})):t.$Message.warning(e.data.message?e.data.message:"网络错误，请稍后重试")}).catch(function(e){t.$Message.error("网络错误，请联系客服")})},onChangeSelect:function(e){this.employee.roleIds=e.join(","),this.getChosen(e)},getEmployeeDetail:function(e){var t=this;c.a.post("findEmployeeDetail",{employeeId:e}).then(function(e){e.success&&(t.employee=r()(t.employee,e.data||{}),t.rolePrivileges=v()(t.employee.roles,"id"),t.$set(t.employee,"roleIds",t.rolePrivileges.join(",")),t.roleNames=v()(t.employee.roles||[],"roleName").join(","),t.oldPwd=t.employee.password)})},searchMatched:function(){var a=this;this.matchedData=this.enumData.privileges.filter(function(e,t){return e.roleName.includes(a.roleKeyword)})},getChosen:function(e){var a=this,i=[];e.forEach(function(t){a.enumData.privileges.forEach(function(e){e.id==t&&i.push(e.roleName)})}),this.roleNames=i.join(",")},handleClickItem:function(e){var t=this;this.activeGroupItem=e,c.a.post("findRolePrivInOrg",{roleId:e.id}).then(function(e){e.success&&(t.roleInOrg=e.data||[],t.menuInRole=[],t.activeRoleInOrg={})})},onActiveAuthor:function(e){this.activeRoleInOrg=e,this.menuInRole=e.rolePrivModels}},created:function(){this.init()}},y={render:function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{staticClass:"new-employee-info"},[i("Form",{ref:"formValidate",attrs:{model:a.employee,rules:a.ruleValidate,"label-position":"top"}},[i("div",{staticClass:"ivu-form-item-wrap"},[i("Form-item",{attrs:{label:a.$t("departName"),prop:"deptId"}},[i("Select",{attrs:{placeholder:a.$t("selectField",{msg:""})},model:{value:a.employee.deptId,callback:function(e){a.$set(a.employee,"deptId",e)},expression:"employee.deptId"}},a._l(a.enumData.department,function(e){return i("Option",{key:e.id,attrs:{value:e.id}},[a._v(a._s(e.orgName)+"\n                    ")])}))],1)],1),a._v(" "),i("div",{staticClass:"ivu-form-item-wrap"},[i("Form-item",{attrs:{label:a.$t("loginName"),prop:"loginName"}},[i("Input",{attrs:{placeholder:a.$t("inputField",{field:""})},model:{value:a.employee.loginName,callback:function(e){a.$set(a.employee,"loginName","string"==typeof e?e.trim():e)},expression:"employee.loginName"}})],1)],1),a._v(" "),i("div",{staticClass:"ivu-form-item-wrap"},[i("Form-item",{attrs:{label:a.$t("password"),prop:"password"}},[i("Input",{attrs:{type:"password",placeholder:a.$t("inputField",{field:""})},model:{value:a.employee.password,callback:function(e){a.$set(a.employee,"password","string"==typeof e?e.trim():e)},expression:"employee.password"}})],1)],1),a._v(" "),i("div",{staticClass:"ivu-form-item-wrap"},[i("Form-item",{attrs:{label:a.$t("name"),prop:"nickName"}},[i("Input",{attrs:{placeholder:a.$t("inputField",{field:""})},model:{value:a.employee.nickName,callback:function(e){a.$set(a.employee,"nickName","string"==typeof e?e.trim():e)},expression:"employee.nickName"}})],1)],1),a._v(" "),i("div",{staticClass:"ivu-form-item-wrap"},[i("Form-item",{attrs:{label:a.$t("telephone"),prop:"phone"}},[i("Input",{attrs:{placeholder:a.$t("inputField",{field:""})},model:{value:a.employee.phone,callback:function(e){a.$set(a.employee,"phone","string"==typeof e?e.trim():e)},expression:"employee.phone"}})],1)],1),a._v(" "),i("div",{staticClass:"ivu-form-item-wrap"},[i("Form-item",{attrs:{label:a.$t("gender"),prop:"sex"}},[i("Select",{attrs:{placeholder:a.$t("selectField",{msg:""})},model:{value:a.employee.sex,callback:function(e){a.$set(a.employee,"sex",e)},expression:"employee.sex"}},a._l(a.genderEnum,function(e){return i("Option",{key:e.name,attrs:{value:e.name}},[a._v(a._s(a.$t(e.desc))+"\n                    ")])}))],1)],1),a._v(" "),i("div",{staticClass:"ivu-form-item-wrap"},[i("Form-item",{attrs:{label:a.$t("birthday"),prop:"birthday"}},[i("Date-picker",{attrs:{type:"date",options:a.dateOption,format:"yyyy-MM-dd",placeholder:a.$t("selectField",{msg:""})},on:{"on-change":function(e){a.customValid(e,"birthday")}},model:{value:a.employee.birthday,callback:function(e){a.$set(a.employee,"birthday",e)},expression:"employee.birthday"}})],1)],1),a._v(" "),i("div",{staticClass:"ivu-form-item-wrap"},[i("Form-item",{attrs:{label:a.$t("nativePlace"),prop:"nativePlace"}},[i("Select",{attrs:{placeholder:a.$t("selectField",{msg:""})},model:{value:a.employee.provinceId,callback:function(e){a.$set(a.employee,"provinceId",e)},expression:"employee.provinceId"}},a._l(a.enumData.nativePlace,function(e){return i("Option",{key:e.id,attrs:{value:e.provinceid}},[a._v(a._s(e.province)+"\n                    ")])}))],1)],1),a._v(" "),i("div",{staticClass:"ivu-form-item-wrap"},[i("Form-item",{attrs:{label:a.$t("nativeAddress"),prop:"address"}},[i("Input",{attrs:{placeholder:a.$t("inputField",{field:""})},model:{value:a.employee.address,callback:function(e){a.$set(a.employee,"address","string"==typeof e?e.trim():e)},expression:"employee.address"}})],1)],1),a._v(" "),i("Form-item",{staticStyle:{width:"845px"},attrs:{label:a.$t("remark"),prop:"descript"}},[i("Input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:a.$t("inputField",{field:""})},model:{value:a.employee.descript,callback:function(e){a.$set(a.employee,"descript","string"==typeof e?e.trim():e)},expression:"employee.descript"}})],1),a._v(" "),i("Form-item",{staticClass:"privilege-wrap",attrs:{label:a.$t("rolePermission"),prop:"privileges"}},[0!=a.rolePrivileges.length?i("span",{staticClass:"text text-ellipsis"},[a._v(a._s(a.roleNames))]):a._e(),a._v(" "),i("Select",{attrs:{placeholder:0!=a.rolePrivileges.length?"":a.$t("selectField",{msg:""})}},[i("Option",{attrs:{value:""}},[i("div",{staticClass:"select-content",on:{click:function(e){e.stopPropagation()}}},[i("div",{staticClass:"selectTop"},[i("Input",{staticClass:"search-classify-input",attrs:{placeholder:a.$t("搜索"),icon:"ios-search"},on:{"on-enter":a.searchMatched,"on-click":a.searchMatched},model:{value:a.roleKeyword,callback:function(e){a.roleKeyword="string"==typeof e?e.trim():e},expression:"roleKeyword"}})],1),a._v(" "),i("Checkbox-group",{on:{"on-change":a.onChangeSelect},model:{value:a.rolePrivileges,callback:function(e){a.rolePrivileges=e},expression:"rolePrivileges"}},a._l(a.matchedData,function(t,e){return i("div",{key:e,class:["select-group-item",{active:t.id==a.activeGroupItem.id}],on:{click:function(e){a.handleClickItem(t)}}},[i("Checkbox",{attrs:{label:t.id},nativeOn:{click:function(e){e.stopPropagation()}}},[a._v(a._s(""))]),a._v(" "),i("span",{directives:[{name:"w-title",rawName:"v-w-title",value:t.roleName,expression:"item.roleName"}],staticClass:"value text-ellipsis"},[a._v(a._s(t.roleName))])],1)})),a._v(" "),0==a.enumData.privileges.length?i("div",{staticClass:"no-data"},[a._v("暂无数据")]):a._e(),a._v(" "),0!=a.enumData.privileges.length&&0==a.matchedData.length?i("div",{staticClass:"no-data"},[a._v("暂无搜索结果")]):a._e(),a._v(" "),i("div",{staticClass:"privilege-part"},[i("div",{staticClass:"part-1"},[i("h4",[a._v("景区权限")]),a._v(" "),i("div",{staticClass:"part-content"},[a._l(a.roleInOrg,function(t,e){return i("div",{key:e,class:["part-author",{"active-author":t.orgId==a.activeRoleInOrg.orgId}],on:{click:function(e){a.onActiveAuthor(t)}}},[a._v(a._s(t.orgName)+"\n                                    ")])}),a._v(" "),0==a.roleInOrg.length?i("p",{staticClass:"no-data"},[a._v("暂无数据")]):a._e()],2)]),a._v(" "),i("div",{staticClass:"part-2"},[i("h4",[a._v("菜单权限\n                                    "),a.activeRoleInOrg.orgName?i("span",[a._v("\n                                        （"),i("span",{directives:[{name:"w-title",rawName:"v-w-title",value:a.activeRoleInOrg.orgName,expression:"activeRoleInOrg.orgName"}],staticClass:"title-desc text-ellipsis"},[a._v(a._s(a.activeRoleInOrg.orgName))]),a._v("）\n                                    ")]):a._e()]),a._v(" "),i("div",{staticClass:"part-content"},[a._l(a.menuInRole,function(e,t){return i("div",{key:t,class:["part-author"],on:{click:function(e){}}},[a._v(a._s(a.$t(e.privCode))+"\n                                    ")])}),a._v(" "),0==a.menuInRole.length?i("p",{staticClass:"no-data"},[a._v("暂无数据")]):a._e()],2)])])],1)])],1)],1),a._v(" "),i("div",{staticClass:"ivu-form-item-wrap"},[i("Form-item",{attrs:{label:a.$t("isStarted"),prop:"status"}},[i("Checkbox",{attrs:{"true-value":"valid","false-value":"invalid"},model:{value:a.employee.status,callback:function(e){a.$set(a.employee,"status",e)},expression:"employee.status"}})],1)],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(g,y,!1,function(e){a("l+M+")},null,null).exports,_=a("7dVJ"),w={components:{basicForm:b,breadCrumbHead:s.a},mixins:[_.a],data:function(){return{beforeRouterList:[{name:"employee",router:"employee"}],type:"add",loading:!1,employeeData:{}}},computed:{localeRouter:function(){return("add"===this.type?this.$t("add"):this.$t("edit"))+this.$t("employee")}},created:function(){this.init()},methods:{init:function(){this.$route.query&&this.$route.query.type&&(this.type=this.$route.query.type)},confirmModify:function(){this.$refs.basicForm.formValidateFunc()},getParams:function(e){"modify"===this.$route.query.type&&e&&0<n()(e).length&&(this.employeeData=e.employeeItem)}}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-employee"},[a("div",{staticClass:"breadcrumb-box"},[a("bread-crumb-head",{attrs:{"before-router-list":e.beforeRouterList,"locale-router":e.localeRouter}})],1),e._v(" "),a("div",{staticClass:"add-employee-content"},[a("basic-form",{ref:"basicForm",attrs:{"employee-info":e.employeeData}}),e._v(" "),a("div",{staticClass:"content-footer"},[a("i-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.confirmModify}},[e._v(e._s("add"==e.type?e.$t("confirmAdd"):e.$t("confirm")))]),e._v(" "),a("router-link",{attrs:{to:{name:"employee"}}},[a("i-button",{attrs:{type:"ghost"}},[e._v(e._s(e.$t("cancel")))])],1)],1)],1)])},staticRenderFns:[]};var k=a("VU/8")(w,C,!1,function(e){a("8Nst")},"data-v-e0e5b1e6",null);t.default=k.exports},pQJ6:function(e,t,a){var r=a("bGc4");e.exports=function(s,o){return function(e,t){if(null==e)return e;if(!r(e))return s(e,t);for(var a=e.length,i=o?a:-1,n=Object(e);(o?i--:++i<a)&&!1!==t(n[i],i,n););return e}}},pvPc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),n=a.n(i),s=a("3owm"),o=a("fZjL"),r=a.n(o),l=a("Gu7T"),d=a.n(l),c=a("mvHQ"),u=a.n(c),p=a("gyMJ"),h=a("gs2Y"),m=a.n(h),f=a("w9Mt"),v=a.n(f),g={components:{},props:[],data:function(){return{visible:!1,addChannel:{channelName:"",type:"online",serverUrl:"",appId:"",appSecret:"",status:"valid",description:""},type:"add",emptyParams:"",ruleValidate:{channelName:[{required:!0,message:"请输入自营渠道名称",trigger:"blur"},{max:100,message:this.$t("errorMaxLength",{field:this.$t("自营渠道名称"),length:100}),trigger:"blur"}],description:[{max:100,message:this.$t("errorMaxLength",{field:this.$t("remark"),length:100}),trigger:"blur"}]}}},computed:{},created:function(){this.emptyParams=u()(this.addChannel)},watch:{},methods:{show:function(e){e.item&&(this.addChannel=m()({},v()(e.item,[].concat(d()(r()(this.addChannel)),["id"])),this.addChannel)),this.type=e.type,this.visible=!0},hide:function(){this.visible=!1,this.addChannel=JSON.parse(this.emptyParams)},submit:function(){var t=this;this.$refs.formValidate.validate(function(e){e&&t.confirmAdd()})},confirmAdd:function(){var t=this,a=this,i={};"add"==this.type?(i.successTip="您已成功新增自营渠道",i.failTip="新增自营渠道失败"):"modify"==this.type&&(i.successTip="您已成功修改自营渠道",i.failTip="修改自营渠道失败"),p.a.post("addOrUpdateSelfChannel",this.addChannel).then(function(e){e.success?(a.$Message.success(i.successTip+"："+a.addChannel.channelName),a.$emit("on-add-success"),a.hide()):t.$Message.error(e.message?e.message:i.failTip)})}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"addChannel",attrs:{"class-name":"vertical-center-modal","mask-closable":!1,width:560,title:"add"==t.type?t.$t("新增自营渠道"):t.$t("修改自营渠道")},on:{"on-cancel":t.hide},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("Form",{ref:"formValidate",attrs:{model:t.addChannel,rules:t.ruleValidate,"label-width":120}},[a("Form-item",{attrs:{label:"自营渠道名称",prop:"channelName"}},[a("Input",{attrs:{placeholder:t.$t("inputField",{field:""})},model:{value:t.addChannel.channelName,callback:function(e){t.$set(t.addChannel,"channelName",e)},expression:"addChannel.channelName"}})],1),t._v(" "),a("Form-item",{attrs:{label:"自营渠道类型",prop:"type"}},[a("RadioGroup",{model:{value:t.addChannel.type,callback:function(e){t.$set(t.addChannel,"type",e)},expression:"addChannel.type"}},[a("Radio",{attrs:{label:"online"}},[a("span",[t._v("线上")])]),t._v(" "),a("Radio",{staticStyle:{"margin-right":"0"},attrs:{label:"offline"}},[a("span",[t._v("线下")])]),t._v(" "),a("Tooltip",{attrs:{placement:"top"}},[a("i",{staticClass:"iconfont icon-note"}),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"tip-trade"},[t._v(t._s(t.$t("创建线下自营渠道（款台）请至组织结构内新增款台节点")))])])])],1)],1),t._v(" "),a("Form-item",{attrs:{label:"URL"}},[a("Input",{attrs:{placeholder:t.$t("inputField",{field:""})},model:{value:t.addChannel.serverUrl,callback:function(e){t.$set(t.addChannel,"serverUrl",e)},expression:"addChannel.serverUrl"}})],1),t._v(" "),a("Form-item",{attrs:{label:"APP ID",prop:"appId"}},[a("Input",{attrs:{placeholder:t.$t("inputField",{field:""})},model:{value:t.addChannel.appId,callback:function(e){t.$set(t.addChannel,"appId",e)},expression:"addChannel.appId"}})],1),t._v(" "),a("Form-item",{attrs:{label:"APP Secret",prop:"appSecret"}},[a("Input",{attrs:{placeholder:t.$t("inputField",{field:""})},model:{value:t.addChannel.appSecret,callback:function(e){t.$set(t.addChannel,"appSecret",e)},expression:"addChannel.appSecret"}})],1),t._v(" "),a("Form-item",{attrs:{label:t.$t("remark")+"：",prop:"description"}},[a("Input",{attrs:{type:"textarea",rows:4,placeholder:t.$t("inputField",{field:""})},model:{value:t.addChannel.description,callback:function(e){t.$set(t.addChannel,"description",e)},expression:"addChannel.description"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[[a("i-button",{attrs:{type:"primary"},on:{click:function(e){t.submit()}}},[t._v(t._s(t.$t("save")))]),t._v(" "),a("i-button",{attrs:{type:"ghost"},on:{click:t.hide}},[t._v(t._s(t.$t("cancel")))])]],2)],1)},staticRenderFns:[]};var b=a("VU/8")(g,y,!1,function(e){a("knPP")},"data-v-7671d679",null).exports,_=a("g5kf"),w=a("9Ur+"),C=a("DB50"),k=a("TLh+"),$=a("2247"),D=a.n($),N={components:{filterDrop:s.a,addSelfSupport:b,delModal:_.a,tableCom:C.a},data:function(){return{queryParams:{pageNo:1,pageSize:k.e.pageDefaultSize},filterParam:{keyword:""},columnData:w.b,tableData:[],totalCount:0,enableValue:!0,name:"",deleteName:"删除渠道",rowIds:[],batchOperate:k.b,chosenRowData:[]}},methods:{queryList:function(){var t=this;p.a.post("querySelfOwnedChannel",this.queryParams).then(function(e){e.success&&(e.data&&e.data.data?(t.tableData=e.data.data,t.totalCount=e.data.totalRow):(t.tableData=[],t.totalCount=0))})},handleSearch:function(){this.queryParams.pageNo=1,n()(this.queryParams,this.filterParam),this.queryList()},renderHeader:function(e,t){return e(s.a,{props:{colParams:t.column,filters:this.listFilters},on:{"state-filter":this.handleAlertFilter,"alert-filter":this.handleAlertFilter}})},handleAlertFilter:function(){},enable:function(t,a){var i=this,n={};"valid"==t.status?(n.successTip="您已禁用自营渠道",n.failTip="禁用失败",n.status="invalid"):"invalid"==t.status&&(n.successTip="您已启用自营渠道",n.failTip="启用失败",n.status="valid"),p.a.post("updateChannelStatus",{ids:1==a?this.rowIds.join(","):t.id,status:n.status}).then(function(e){e.success?(1==a?i.$Message.success(n.successTip+"："+i.$t("batchOperate")):i.$Message.success(n.successTip+"："+t.channelName),i.queryList()):i.$Message.error(e.message?e.message:n.failTip)})},newSelfSupportBtn:function(e,t){var a="add"==e?{type:e}:{item:t,type:e};this.$refs.addSelfSupport.show(a)},showDelModal:function(e,t){var a=this;this.name=1==t?(this.rowIds=e.map(function(e){return e.id}),1<e.length?e[0].channelName+"、"+e[1].channelName:""+e[0].channelName):(this.rowIds=[e.id],e.channelName),this.$refs.delListModal.show({title:this.$t(this.deleteName),confirmCallback:function(){a.handleDeletions()}})},handleDeletions:function(){var t=this;p.a.post("deleteChannels",{ids:this.rowIds.join(",")}).then(function(e){e.success&&(t.$Message.success(t.$t("successTip",{tip:t.$t("del")})),t.handleSearch())})},changeSelection:function(e){0<(this.chosenRowData=e).length&&(this.rowIds=D()(e,"id"))},handleCommand:function(e){if(this.chosenRowData.length<=0)this.$Message.warning("请勾选批量操作项");else switch(e.status){case"valid":case"invalid":this.enable(e,!0);break;case"del":var t=this.chosenRowData.filter(function(e,t){return"online"==e.type});t&&0<t.length?this.showDelModal(t,!0):this.$Message.warning("线下渠道主要是售票闸机等，只能在组织架构内增加/删除，不允许在此页面增加或删除。")}}},computed:{},created:function(){}},S={render:function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{staticClass:"channel"},[i("div",{staticClass:"filter-box"},[i("Button",{staticStyle:{float:"left","margin-right":"10px"},attrs:{type:"primary",size:"default"},on:{click:function(e){a.newSelfSupportBtn("add")}}},[i("span",{staticClass:"add-icon"},[a._v("+ "+a._s(a.$t("新增自营渠道")))])]),a._v(" "),i("el-dropdown",{attrs:{trigger:"click",placement:"bottom-start"},on:{command:a.handleCommand}},[i("Button",{staticStyle:{float:"left"},attrs:{type:"ghost",size:"default"}},[a._v(a._s(a.$t("batchOperate")))]),a._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},a._l(a.batchOperate,function(e,t){return i("el-dropdown-item",{key:t,attrs:{disabled:a.chosenRowData.length<=0,command:e}},[a._v(a._s(a.$t(e.label))+"\n                ")])}))],1),a._v(" "),i("Input",{staticClass:"input-field",attrs:{icon:"ios-search",placeholder:a.$t("请输入任意信息进行查询")},on:{"on-enter":a.handleSearch,"on-click":a.handleSearch},model:{value:a.filterParam.keyword,callback:function(e){a.$set(a.filterParam,"keyword","string"==typeof e?e.trim():e)},expression:"filterParam.keyword"}})],1),a._v(" "),i("div",{staticClass:"selectionTable"},[i("table-com",{attrs:{ofsetHeight:170,"show-pagination":!0,"column-data":a.columnData,"table-data":a.tableData,"total-count":a.totalCount,"page-no-d":a.queryParams.pageNo,"page-size-d":a.queryParams.pageSize,border:!0,"column-check":!0},on:{"update:pageNoD":function(e){a.$set(a.queryParams,"pageNo",e)},"update:pageSizeD":function(e){a.$set(a.queryParams,"pageSize",e)},"query-data":a.queryList,"selection-change":a.changeSelection},scopedSlots:a._u([{key:"column2",fn:function(e){return i("el-table-column",{attrs:{label:e.title,width:e.width,"min-width":e.minWidth},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n                    "+a._s(e.row.saleGroupName?e.row.saleGroupName:"未分组")+"\n                ")]}}])})}},{key:"column3",fn:function(e){return i("el-table-column",{attrs:{label:e.title,width:e.width,"min-width":e.minWidth},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n                    "+a._s("online"==e.row.type?"线上":"线下")+"\n                ")]}}])})}},{key:"column5",fn:function(e){return i("el-table-column",{attrs:{label:e.title,width:e.width,"min-width":e.minWidth},scopedSlots:a._u([{key:"default",fn:function(e){return["valid"==e.row.status?i("span",[i("span",{staticClass:"status-sign valid"}),a._v("已启用\n                    ")]):a._e(),a._v(" "),"invalid"==e.row.status?i("span",[i("span",{staticClass:"status-sign invalid"}),a._v("未启用\n                    ")]):a._e()]}}])})}},{key:"column7",fn:function(e){return i("el-table-column",{attrs:{label:e.title,width:e.width,fixed:"right","min-width":e.minWidth},scopedSlots:a._u([{key:"default",fn:function(t){return[i("span",{staticClass:"operate-btn blue",on:{click:function(e){a.newSelfSupportBtn("modify",t.row)}}},[a._v(a._s(a.$t("modify"))+"\n                    ")]),a._v(" "),i("span",{staticClass:"divide-line"}),a._v(" "),i("span",{class:["operate-btn","valid"==t.row.status?"org":"blue"],on:{click:function(e){a.enable(t.row)}}},[a._v(a._s("valid"==t.row.status?a.$t("disabled"):a.$t("commissioned"))+"\n                    ")]),a._v(" "),i("span",{staticClass:"divide-line"}),a._v(" "),"online"==t.row.type?i("span",{class:["operate-btn","red"],on:{click:function(e){a.showDelModal(t.row)}}},[a._v(a._s(a.$t("del"))+"\n                    ")]):a._e(),a._v(" "),"offline"==t.row.type?i("Tooltip",{attrs:{placement:"top-end",transfer:!0}},[i("span",{class:["operate-btn","gray"]},[a._v(a._s(a.$t("del")))]),a._v(" "),i("div",{attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"tip-trade"},[a._v(a._s(a.$t("线下渠道主要是售票闸机等，只能在组织架构内增加/删除，不允许在此页面增加或删除。")))])])]):a._e()]}}])})}}])})],1),a._v(" "),i("add-self-support",{ref:"addSelfSupport",on:{"on-add-success":a.queryList}}),a._v(" "),i("del-modal",{ref:"delListModal"},[i("span",{staticClass:"content-text"},[i("i",{staticClass:"iconfont icon-help delete-icon"}),a._v(a._s(a.$t("isDoing"))+a._s(a.$t("delete"))+"：\n            "),i("span",{directives:[{name:"w-title",rawName:"v-w-title",value:a.name,expression:"name"}],staticClass:"yellow-label"},[a._v(a._s(a.name))]),a._v(" "),1<a.rowIds.length?i("span",{staticStyle:{color:"#333"}},[a._v("等"+a._s(a.rowIds.length)+"个渠道")]):a._e()]),a._v(" "),i("span",[i("span",{staticClass:"red-label"},[a._v(a._s(a.$t("irreversible")))]),a._v("，"+a._s(a.$t("sureToDel")))])])],1)},staticRenderFns:[]};var I=a("VU/8")(N,S,!1,function(e){a("OUjh")},"data-v-6d4d9305",null);t.default=I.exports},qxqm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),n=a.n(i),s=a("3owm"),o=a("fZjL"),r=a.n(o),l=a("Gu7T"),d=a.n(l),c=a("mvHQ"),u=a.n(c),p=a("gyMJ"),h=a("gs2Y"),m=a.n(h),f=a("w9Mt"),v=a.n(f),g={components:{},props:[],data:function(){return{visible:!1,readonly:!1,loading:!1,addPartner:{partnerId:"",startDate:"",endDate:"",saleGroupId:"",channelName:"",description:"",status:"valid"},ruleValidate:{partnerId:[{required:!0,message:"请选择合作伙伴",trigger:"change"}],startDate:[{required:!0,message:"请选择协议起止日期",trigger:"change"}],endDate:[{required:!0,message:"请选择协议起止日期",trigger:"change"}],description:[{max:100,message:this.$t("errorMaxLength",{field:this.$t("remark"),length:100}),trigger:"blur"}]},partners:[],saleChannels:[],protoDate:[],type:"add",emptyPartner:""}},computed:{},created:function(){this.getSaleGroup(),this.getAllPartnerList(),this.emptyPartner=u()(this.addPartner)},watch:{},methods:{show:function(e){e.item&&(this.addPartner=m()({},v()(e.item,[].concat(d()(r()(this.addPartner)),["id"])),this.addPartner),this.protoDate=[e.item.startDate,e.item.endDate]),this.type=e.type,this.visible=!0},hide:function(){this.visible=!1,this.addPartner=JSON.parse(this.emptyPartner),this.protoDate=[]},submit:function(){var t=this;this.$refs.formValidate.validate(function(e){e&&t.confirmAddPartner()})},getSaleGroup:function(){var t=this;p.a.post("getOrgGroupList",{groupType:"sale"}).then(function(e){e.success&&(t.saleChannels=e.data||[])})},getAllPartnerList:function(){var t=this;p.a.post("queryAllPartnerList").then(function(e){e.success&&(t.partners=e.data||[])})},changeDateRange:function(e){this.addPartner.startDate=e[0],this.addPartner.endDate=e[1]},confirmAddPartner:function(){var a=this,i={};"add"==this.type?(i.apiKey="addPartner",i.successTip="您已成功新增合作伙伴",i.failTip="新增合作伙伴失败"):"modify"==this.type&&(i.apiKey="updatePartner",i.successTip="您已成功修改合作伙伴",i.failTip="修改合作伙伴失败"),this.addPartner.startDate=new Date(this.addPartner.startDate).format("yyyy-MM-dd"),this.addPartner.endDate=new Date(this.addPartner.endDate).format("yyyy-MM-dd"),p.a.post(i.apiKey,this.addPartner).then(function(e){if(e.success){var t=a.partners.find(function(e,t){return e.id===a.addPartner.partnerId});a.$Message.success(i.successTip+"："+(t?t.orgName:"")),a.$emit("on-add-success"),a.hide()}else a.$Message.error(e.message?e.message:i.failTip)})},handlePartnerChanged:function(a){a&&(this.addPartner.channelName=this.partners.find(function(e,t){return e.id===a}).orgName)}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"addPartner",attrs:{"class-name":"vertical-center-modal","mask-closable":!1,width:560},on:{"on-cancel":t.hide},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("div",{staticClass:"ivu-modal-header-inner",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s("add"==t.type?t.$t("新增合作伙伴"):t.$t("修改合作伙伴")))])]),t._v(" "),a("Form",{ref:"formValidate",attrs:{model:t.addPartner,rules:t.ruleValidate,"label-width":120}},[a("Form-item",{attrs:{label:"合作伙伴名称",prop:"partnerId"}},[a("Select",{attrs:{disabled:"modify"==t.type},on:{"on-change":t.handlePartnerChanged},model:{value:t.addPartner.partnerId,callback:function(e){t.$set(t.addPartner,"partnerId",e)},expression:"addPartner.partnerId"}},t._l(t.partners,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.orgName))])}))],1),t._v(" "),a("Form-item",{attrs:{label:"协议起止日期",prop:"startDate"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange",placement:"bottom-end",placeholder:t.$t("selectField",{msg:""}),format:"yyyy-MM-dd"},on:{"on-change":t.changeDateRange},model:{value:t.protoDate,callback:function(e){t.protoDate=e},expression:"protoDate"}})],1),t._v(" "),a("Form-item",{attrs:{label:"销售渠道分组",prop:"saleGroupId"}},[a("Select",{model:{value:t.addPartner.saleGroupId,callback:function(e){t.$set(t.addPartner,"saleGroupId",e)},expression:"addPartner.saleGroupId"}},t._l(t.saleChannels,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.groupName))])}))],1),t._v(" "),a("Form-item",{attrs:{label:t.$t("remark")+"：",prop:"description"}},[a("Input",{attrs:{type:"textarea",rows:4,placeholder:t.$t("inputField",{field:""})},model:{value:t.addPartner.description,callback:function(e){t.$set(t.addPartner,"description",e)},expression:"addPartner.description"}})],1),t._v(" "),a("Form-item",{attrs:{label:"是否启用协议",prop:"status"}},[a("RadioGroup",{model:{value:t.addPartner.status,callback:function(e){t.$set(t.addPartner,"status",e)},expression:"addPartner.status"}},[a("Radio",{attrs:{label:"valid"}},[a("span",[t._v("启用")])]),t._v(" "),a("Radio",{attrs:{label:"invalid"}},[a("span",[t._v("暂不启用")])])],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[[a("i-button",{attrs:{type:"primary"},on:{click:function(e){t.submit()}}},[t._v(t._s(t.$t("save")))]),t._v(" "),a("i-button",{attrs:{type:"ghost"},on:{click:t.hide}},[t._v(t._s(t.$t("cancel")))])]],2)],1)},staticRenderFns:[]};var b=a("VU/8")(g,y,!1,function(e){a("ArGh")},"data-v-2e2745a9",null).exports,_=a("g5kf"),w=a("9Ur+"),C=a("DB50"),k=a("TLh+"),$=a("2247"),D=a.n($),N={components:{filterDrop:s.a,addPartner:b,delModal:_.a,tableCom:C.a},data:function(){return{queryParams:{pageNo:1,pageSize:k.e.pageDefaultSize,nodeType:"partner"},filterParam:{keyword:""},columnData:w.a,tableData:[],totalCount:0,enableValue:!0,name:"",deleteName:"删除合作伙伴",partnerIds:[],batchOperate:k.b,chosenPartners:[]}},methods:{queryList:function(){var t=this;p.a.post("queryPartnerList",this.queryParams).then(function(e){e.success&&(e.data&&e.data.data?(t.tableData=e.data.data,t.totalCount=e.data.totalRow):(t.tableData=[],t.totalCount=0))})},handleSearch:function(){this.queryParams.pageNo=1,n()(this.queryParams,this.filterParam),this.queryList()},renderHeader:function(e,t){return e(s.a,{props:{colParams:t.column,filters:this.listFilters},on:{"state-filter":this.handleAlertFilter,"alert-filter":this.handleAlertFilter}})},handleAlertFilter:function(){},enable:function(t,a){var i=this,n={};"valid"==t.status?(n.successTip="您已禁用合作伙伴",n.failTip="禁用失败",n.status="invalid"):"invalid"==t.status&&(n.successTip="您已启用合作伙伴",n.failTip="启用失败",n.status="valid"),p.a.post("updatePartnerStatus",{ids:1==a?this.partnerIds.join(","):t.id,status:n.status}).then(function(e){e.success?(1==a?i.$Message.success(n.successTip+"："+i.$t("batchOperate")):i.$Message.success(n.successTip+"："+t.channelName),i.queryList()):i.$Message.error(e.message?e.message:n.failTip)})},newPartnerBtn:function(e,t){var a="add"==e?{type:e}:{item:t,type:e};this.$refs.addPartnerModal.show(a)},showDelModal:function(e,t){var a=this;this.name=1==t?(this.partnerIds=e.map(function(e){return e.id}),1<e.length?e[0].channelName+"、"+e[1].channelName:""+e[0].channelName):(this.partnerIds=[e.id],e.channelName),this.$refs.delListModal.show({title:this.$t(this.deleteName),confirmCallback:function(){a.handleDeletions()}})},handleDeletions:function(){var t=this;p.a.post("deletePartners",{ids:this.partnerIds.join(",")}).then(function(e){e.success&&(t.$Message.success(t.$t("successTip",{tip:t.$t("del")})),t.handleSearch())})},changeSelection:function(e){0<(this.chosenPartners=e).length&&(this.partnerIds=D()(e,"id"))},handleCommand:function(e){if(this.chosenPartners.length<=0)this.$Message.warning("请勾选批量操作项");else switch(e.status){case"valid":case"invalid":this.enable(e,!0);break;case"del":this.showDelModal(this.chosenPartners,!0)}}},computed:{},created:function(){}},S={render:function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{staticClass:"partner"},[i("div",{staticClass:"filter-box"},[i("Button",{staticStyle:{float:"left","margin-right":"10px"},attrs:{type:"primary",size:"default"},on:{click:function(e){a.newPartnerBtn("add")}}},[i("span",{staticClass:"add-icon"},[a._v("+ "+a._s(a.$t("新增合作伙伴")))])]),a._v(" "),i("el-dropdown",{attrs:{trigger:"click",placement:"bottom-start"},on:{command:a.handleCommand}},[i("Button",{staticStyle:{float:"left"},attrs:{type:"ghost",size:"default"}},[a._v(a._s(a.$t("batchOperate")))]),a._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},a._l(a.batchOperate,function(e,t){return i("el-dropdown-item",{key:t,attrs:{disabled:a.chosenPartners.length<=0,command:e}},[a._v(a._s(a.$t(e.label))+"\n                ")])}))],1),a._v(" "),i("Input",{staticClass:"input-field",attrs:{icon:"ios-search",placeholder:a.$t("请输入任意信息进行查询")},on:{"on-enter":a.handleSearch,"on-click":a.handleSearch},model:{value:a.filterParam.keyword,callback:function(e){a.$set(a.filterParam,"keyword","string"==typeof e?e.trim():e)},expression:"filterParam.keyword"}})],1),a._v(" "),i("div",{staticClass:"selection-table"},[i("table-com",{attrs:{ofsetHeight:170,"show-pagination":!0,"column-data":a.columnData,"table-data":a.tableData,"total-count":a.totalCount,"page-no-d":a.queryParams.pageNo,"page-size-d":a.queryParams.pageSize,border:!0,"column-check":!0},on:{"update:pageNoD":function(e){a.$set(a.queryParams,"pageNo",e)},"update:pageSizeD":function(e){a.$set(a.queryParams,"pageSize",e)},"query-data":a.queryList,"selection-change":a.changeSelection},scopedSlots:a._u([{key:"column3",fn:function(e){return i("el-table-column",{attrs:{label:e.title,width:e.width,"min-width":e.minWidth},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n                    "+a._s(new Date(e.row.startDate).format("yyyy-MM-dd"))+"\n                ")]}}])})}},{key:"column4",fn:function(e){return i("el-table-column",{attrs:{label:e.title,width:e.width,"min-width":e.minWidth},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n                    "+a._s(new Date(e.row.endDate).format("yyyy-MM-dd"))+"\n                ")]}}])})}},{key:"column5",fn:function(e){return i("el-table-column",{attrs:{label:e.title,width:e.width,"min-width":e.minWidth},scopedSlots:a._u([{key:"default",fn:function(e){return["valid"==e.row.status?i("span",[i("span",{staticClass:"status-sign valid"}),a._v("已启用\n                    ")]):a._e(),a._v(" "),"invalid"==e.row.status?i("span",[i("span",{staticClass:"status-sign invalid"}),a._v("未启用\n                    ")]):a._e()]}}])})}},{key:"column7",fn:function(e){return i("el-table-column",{attrs:{label:e.title,fixed:"right",width:e.width,"min-width":e.minWidth},scopedSlots:a._u([{key:"default",fn:function(t){return[i("span",{staticClass:"operate-btn blue",on:{click:function(e){a.newPartnerBtn("modify",t.row)}}},[a._v(a._s(a.$t("modify")))]),a._v(" "),i("span",{staticClass:"divide-line"}),a._v(" "),i("span",{class:["operate-btn","valid"==t.row.status?"org":"blue"],on:{click:function(e){a.enable(t.row)}}},[a._v(a._s("valid"==t.row.status?a.$t("disabled"):a.$t("commissioned"))+"\n                    ")]),a._v(" "),i("span",{staticClass:"divide-line"}),a._v(" "),i("span",{staticClass:"operate-btn red",on:{click:function(e){a.showDelModal(t.row)}}},[a._v(a._s(a.$t("del")))])]}}])})}}])})],1),a._v(" "),i("add-partner",{ref:"addPartnerModal",on:{"on-add-success":a.queryList}}),a._v(" "),i("del-modal",{ref:"delListModal"},[i("span",{staticClass:"content-text"},[i("i",{staticClass:"iconfont icon-help delete-icon"}),a._v(a._s(a.$t("isDoing"))+a._s(a.$t("delete"))+"：\n            "),i("span",{directives:[{name:"w-title",rawName:"v-w-title",value:a.name,expression:"name"}],staticClass:"yellow-label"},[a._v(a._s(a.name))]),a._v(" "),1<a.partnerIds.length?i("span",{staticStyle:{color:"#333"}},[a._v("等"+a._s(a.partnerIds.length)+"个合作伙伴")]):a._e()]),a._v(" "),i("span",[i("span",{staticClass:"red-label"},[a._v(a._s(a.$t("irreversible")))]),a._v("，"+a._s(a.$t("sureToDel")))])])],1)},staticRenderFns:[]};var I=a("VU/8")(N,S,!1,function(e){a("vR5w")},"data-v-12c5a7d6",null);t.default=I.exports},"r9Y/":function(e,t){},rwFe:function(e,t){},s8XD:function(e,t){},v9aJ:function(e,t,a){var i=a("M6Wl"),n=a("pQJ6")(i);e.exports=n},vR5w:function(e,t){},wqap:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"addSceneryEmployee",attrs:{"class-name":"vertical-center-modal","mask-closable":!1,width:600},on:{"on-cancel":t.hide},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("div",{staticClass:"ivu-modal-header-inner",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("新增员工")])]),t._v(" "),a("div",{staticClass:"content"},[a("p",[t._v("已选："+t._s(t.checkedNum)+"人")]),t._v(" "),a("div",{staticClass:"selectionTable"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:!0},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"员工姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"cellText"},[t._v("张小床")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"员工账号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("zhangxiaoc")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"部门"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("采购部")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"管理景区"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("长隆欢乐世界")])]}}])})],1)],1)]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[[a("i-button",{attrs:{size:"small",type:"primary"}},[t._v(t._s(t.$t("save")))]),t._v(" "),a("i-button",{attrs:{type:"ghost",size:"small"},on:{click:t.hide}},[t._v(t._s(t.$t("cancel")))])]],2)])},staticRenderFns:[]};var n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"addCompanyEmployee",attrs:{"class-name":"vertical-center-modal","mask-closable":!1,width:820},on:{"on-cancel":t.hide},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("div",{staticClass:"ivu-modal-header-inner",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("新增员工")])]),t._v(" "),a("div",{staticClass:"content clearfix"},[a("div",{staticClass:"content-left"},[a("div",{staticClass:"search"},[a("Input",{attrs:{placeholder:"搜索姓名"},model:{value:t.keywards,callback:function(e){t.keywards=e},expression:"keywards"}})],1),t._v(" "),a("div",{staticClass:"selectionTable"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:!0},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"员工姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"cellText"},[t._v("张小床")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"员工账号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("zhangxiaoc")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"部门"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("采购部")])]}}])})],1)],1)]),t._v(" "),a("div",{staticClass:"content-right"},[a("div",{staticClass:"title"},[t._v("景区")]),t._v(" "),a("CheckboxGroup",{model:{value:t.choseScenery,callback:function(e){t.choseScenery=e},expression:"choseScenery"}},[a("Checkbox",{attrs:{label:"株洲欢乐世界"}}),t._v(" "),a("Checkbox",{attrs:{label:"深圳方特游乐园"}}),t._v(" "),a("Checkbox",{attrs:{label:"水立方欢乐世界"}})],1)],1)]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[[a("i-button",{attrs:{size:"small",type:"primary"}},[t._v(t._s(t.$t("save")))]),t._v(" "),a("i-button",{attrs:{type:"ghost",size:"small"},on:{click:t.hide}},[t._v(t._s(t.$t("cancel")))])]],2)])},staticRenderFns:[]};var s={components:{addSceneryEmployee:a("VU/8")({components:{},props:[],data:function(){return{visible:!1,tableData:[{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"}],checkedNum:0}},computed:{},created:function(){},watch:{},methods:{handleSelectionChange:function(e){e&&(this.checkedNum=e.length)},show:function(e){this.visible=!0},hide:function(){this.visible=!1},submit:function(){this.$refs.formValidate.validate(function(e){})}}},i,!1,function(e){a("APCF")},"data-v-a3425e72",null).exports,addCompanyEmployee:a("VU/8")({components:{},props:[],data:function(){return{visible:!1,keywards:"",choseScenery:[],tableData:[{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"},{date:"2016-05-03"}],checkedNum:0}},computed:{},created:function(){},watch:{},methods:{handleSelectionChange:function(e){e&&(this.checkedNum=e.length)},show:function(e){this.visible=!0},hide:function(){this.visible=!1},submit:function(){this.$refs.formValidate.validate(function(e){})}}},n,!1,function(e){a("eYVi")},"data-v-67a33f14",null).exports},data:function(){return{tableData:[{date:"2016-05-03"}],detailType:""}},methods:{addEmployee:function(){"scenery"==this.detailType?this.$refs.addScEmModal.show():this.$refs.addCoEmModal.show()},modify:function(){},deleteListBtn:function(){},init:function(){this.$route.query&&this.$route.query.detailType&&(this.detailType=this.$route.query.detailType)}},computed:{},created:function(){this.init()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"partner"},[a("div",{staticClass:"breadcrumb-box"},[a("Breadcrumb",{attrs:{separator:">"}},[a("BreadcrumbItem",{attrs:{to:"/orgManage/rolePermission"}},[t._v("角色权限")]),t._v(" "),a("BreadcrumbItem",[t._v("详情")])],1)],1),t._v(" "),a("div",{staticClass:"org-header"},[t._m(0),t._v(" "),a("div",{staticClass:"clearfix"},[a("Button",{staticStyle:{float:"left","margin-right":"10px"},attrs:{type:"primary",size:"default"},on:{click:t.addEmployee}},[t._v("增加员工\n            ")]),t._v(" "),a("Button",{staticClass:"ivu-btn-error",staticStyle:{float:"left"},attrs:{size:"default"}},[t._v("批量删除")])],1)]),t._v(" "),a("div",{staticClass:"selectionTable"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:!0}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"员工姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"cellText"},[t._v("张小床")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"员工账号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("zhangxiaoc")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"合作伙伴名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("A级销售渠道")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"部门"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("采购部")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"管理景区"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("长隆欢乐世界")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"operation"},["company"==t.detailType?a("span",{on:{click:t.modify}},[t._v(t._s(t.$t("modify")))]):t._e(),t._v(" "),a("span",{staticClass:"span-red",on:{click:t.deleteListBtn}},[t._v(t._s(t.$t("del")))])])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"page-sizes":[100,200,300,400],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:400}})],1)],1),t._v(" "),a("add-scenery-employee",{ref:"addScEmModal",on:{upDataList:t.init}}),t._v(" "),a("add-company-employee",{ref:"addCoEmModal",on:{upDataList:t.init}})],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"clearfix"},[a("li",[a("span",[e._v("公司/景区名称：")]),e._v(" "),a("span",[e._v("长隆欢乐世界")])]),e._v(" "),a("li",[a("span",[e._v("业态类型：")]),e._v(" "),a("span",[e._v("票务")])]),e._v(" "),a("li",[a("span",[e._v("角色权限：")]),e._v(" "),a("span",[e._v("产品管理员")])])])}]};var r=a("VU/8")(s,o,!1,function(e){a("VcRh")},null,null);t.default=r.exports},yzuE:function(e,t,a){var o=a("v9aJ"),r=a("bGc4");e.exports=function(e,i){var n=-1,s=r(e)?Array(e.length):[];return o(e,function(e,t,a){s[++n]=i(e,t,a)}),s}},z3z5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gyMJ"),n=a("DB50"),s=[{title:"",width:60,field:"check"},{title:"渠道编码",minWidth:200,field:"id"},{title:"渠道名称",minWidth:150,field:"channelName"},{title:"销售渠道类型",minWidth:150,field:"type"},{title:"销售渠道分组",minWidth:150,field:"saleGroupName"},{title:"操作",width:210,field:"operate"}],o=a("g5kf"),r=a("TLh+"),l={props:{orgGroupList:{type:Array,default:function(){return[]}},saleGroupSelected:{type:Array,default:function(){return[]}}},data:function(){return{batchOperate:r.o,formData:{selectOrgId:""},bathChangeGroupShow:!1,ruleValidate:{selectOrgId:[{required:!0,message:this.$t("selectField",{msg:"销售分组"}),trigger:"change"}]}}},methods:{handleCommand:function(e){this.bathChangeGroupShow=!1,"outGroup"===e.value?this.$emit("handle-out-group"):"toOtherGroup"===e.value&&(this.bathChangeGroupShow=!0)},batchChangeOrg:function(){var t=this;this.$refs.formData.validate(function(e){e&&(t.$emit("handle-remove-group",t.formData.selectOrgId),t.bathChangeGroupShow=!1)})},popperHide:function(){this.$refs.formData.resetFields()}}},d={render:function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("Poptip",{attrs:{placement:"bottom-start",width:"312",transfer:"","popper-class":"select-group"},on:{"on-popper-hide":a.popperHide},model:{value:a.bathChangeGroupShow,callback:function(e){a.bathChangeGroupShow=e},expression:"bathChangeGroupShow"}},[i("el-dropdown",{attrs:{trigger:"click",placement:"bottom-start",size:"medium"},on:{command:a.handleCommand},nativeOn:{click:function(e){e.stopPropagation()}}},[i("Button",{staticStyle:{float:"left"},attrs:{type:"ghost"}},[a._v(a._s(a.$t("batchOperate")))]),a._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},a._l(a.batchOperate,function(e,t){return i("el-dropdown-item",{key:t,attrs:{disabled:a.saleGroupSelected.length<1,command:e}},[a._v(a._s(a.$t(e.label))+"\n            ")])}))],1),a._v(" "),i("div",{attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"name"},[a._v("将所选销售渠道移至分组")]),a._v(" "),i("Form",{ref:"formData",attrs:{model:a.formData,rules:a.ruleValidate}},[i("FormItem",{attrs:{prop:"selectOrgId"}},[i("Select",{staticStyle:{width:"240px"},attrs:{transfer:""},model:{value:a.formData.selectOrgId,callback:function(e){a.$set(a.formData,"selectOrgId",e)},expression:"formData.selectOrgId"}},a._l(a.orgGroupList,function(e){return i("Option",{directives:[{name:"w-title",rawName:"v-w-title",value:e.groupName,expression:"item.groupName"}],key:e.id,staticClass:"name-select",attrs:{value:e.id,label:e.groupName}})}))],1)],1),a._v(" "),i("div",{staticClass:"btn-area"},[i("Button",{attrs:{type:"primary"},on:{click:a.batchChangeOrg}},[a._v("确定")]),a._v(" "),i("Button",{attrs:{type:"ghost"},on:{click:function(e){a.bathChangeGroupShow=!1}}},[a._v("取消")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(l,d,!1,function(e){a("5m77")},"data-v-487d1414",null).exports,u={data:function(){return{addGroupPopVisible:!1,ruleValidate:{orgName:[{required:!0,message:this.$t("inputField",{field:"分组名称"}),trigger:"blur"},{max:50,message:this.$t("errorMaxLength",{field:"分组名称",length:50}),trigger:"blur"}]},formData:{orgName:""}}},methods:{addOrgName:function(){var t=this;this.$refs.formData.validate(function(e){e&&i.a.post("addOrUpdateOrgGroup",{groupType:"sale",groupName:t.formData.orgName}).then(function(e){e.success?(t.$Message.success("新增销售渠道分组:"+t.formData.orgName+"成功"),t.$emit("fresh-data")):t.$Message.error("0004"===e.code?t.$t("checkNameError",{field:t.formData.orgName}):"新增失败")}).finally(function(){t.addGroupPopVisible=!1})})},addGroup:function(e){this.addGroupPopVisible=!0},popperHide:function(){this.$refs.formData.resetFields()}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Poptip",{staticStyle:{float:"left"},attrs:{placement:"bottom-start",width:"312",transfer:"","popper-class":"add-group"},on:{"on-popper-hide":t.popperHide},model:{value:t.addGroupPopVisible,callback:function(e){t.addGroupPopVisible=e},expression:"addGroupPopVisible"}},[a("Button",{staticClass:"ivu-btn-108px",attrs:{type:"primary",icon:"ios-plus-empty"},on:{click:t.addGroup}},[t._v("\n        新增分组\n    ")]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"add-group"},[a("div",{staticClass:"name"},[t._v("新增分组名称")]),t._v(" "),a("Form",{ref:"formData",attrs:{model:t.formData,rules:t.ruleValidate}},[a("FormItem",{attrs:{prop:"orgName"}},[a("Input",{attrs:{autofocus:""},model:{value:t.formData.orgName,callback:function(e){t.$set(t.formData,"orgName","string"==typeof e?e.trim():e)},expression:"formData.orgName"}})],1)],1),t._v(" "),a("div",{staticClass:"btn-area"},[a("Button",{attrs:{type:"primary"},on:{click:t.addOrgName}},[t._v("确定")]),t._v(" "),a("Button",{attrs:{type:"ghost"},on:{click:function(e){t.addGroupPopVisible=!1}}},[t._v("取消")])],1)],1)])],1)},staticRenderFns:[]};var h=a("VU/8")(u,p,!1,function(e){a("r9Y/")},"data-v-716410bb",null).exports,m=a("mvHQ"),f=a.n(m),v=a("nnhM"),g={components:{delModal:o.a,editModal:v.a},props:{orgGroupList:{type:Array,default:function(){return[]}}},data:function(){return{groupType:"-1",currentGroup:{},ruleValidate:{orgName:[{required:!0,message:this.$t("inputField",{field:"分组名称"}),trigger:"blur"},{max:50,message:this.$t("errorMaxLength",{field:"分组名称",length:50}),trigger:"blur"}]},formData:{orgName:"",orgId:""}}},methods:{editOrgType:function(e,t){var a=this;e.stopPropagation(),this.$set(t,"edit",!t.edit),this.formData.orgName=t.groupName,this.formData.orgId=t.id,document.body.click(),this.$refs.editModal.show({title:"修改分组名称",confirmCallback:function(){a.confirmChangeOrgname()}})},delGroupShowModal:function(e,t){var a=this;t.stopPropagation(),this.currentGroup=e,this.$refs.delGroupModal.show({title:"删除分组",confirmCallback:function(){a.delGroup(e)}}),document.body.click()},delGroup:function(t){var a=this;i.a.post("deleteChannelGroup",{groupId:t.id}).then(function(e){e.success?(a.$Message.success("删除分组:"+t.groupName+"成功"),t.id===a.groupType&&(a.groupType="-1",a.$emit("update:groupType",a.groupType)),a.$emit("fresh-data"),a.$emit("fresh-channel")):a.$Message.error("删除失败")})},groupChange:function(){this.$emit("update:groupType",this.groupType),this.$emit("fresh-channel")},confirmChangeOrgname:function(){var t=this;i.a.post("addOrUpdateOrgGroup",{id:this.formData.orgId,groupType:"sale",groupName:this.formData.orgName}).then(function(e){e.success?(t.$Message.success("修改成功"),t.$emit("fresh-data"),t.$emit("fresh-channel")):t.$Message.error("修改失败")}).finally(function(){t.$refs.editModal.hide()})}},computed:{allGroupList:function(){var e=[];return this.orgGroupList&&0<this.orgGroupList.length?(e=JSON.parse(f()(this.orgGroupList))).push({groupName:"未分组",id:"-2",stay:!0}):e.push({groupName:"未分组",id:"-2",stay:!0}),e.unshift({groupName:"全部分组",id:"-1",stay:!0}),e}},created:function(){this.$emit("update:groupType",this.groupType)}},y={render:function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{staticClass:"group-list-main"},[i("Select",{staticClass:"group-list",staticStyle:{width:"280px","z-index":"2000"},on:{"on-change":a.groupChange},model:{value:a.groupType,callback:function(e){a.groupType=e},expression:"groupType"}},a._l(a.allGroupList,function(t){return i("Option",{key:t.id,attrs:{value:t.id,label:t.groupName}},[i("div",{staticClass:"group-list"},[[i("span",{directives:[{name:"w-title",rawName:"v-w-title",value:t.groupName,expression:"item.groupName"}],staticClass:"label-text"},[a._v(a._s(t.groupName))]),a._v(" "),!0!==t.stay?i("span",{staticClass:"iconfont icon-edit",on:{click:function(e){a.editOrgType(e,t)}}}):a._e(),a._v(" "),!0!==t.stay?i("span",{staticClass:"iconfont icon-delete",on:{click:function(e){a.delGroupShowModal(t,e)}}}):a._e()]],2)])})),a._v(" "),i("del-modal",{ref:"delGroupModal"},[i("div",{staticClass:"del-tips"},[i("Icon",{attrs:{type:"help-circled"}}),a._v(" "),i("span",{staticClass:"red-bale"},[a._v("您正在删除分组：\n            "),i("span",{staticStyle:{color:"#f8a334"}},[a._v(a._s(a.currentGroup.groupName))]),a._v(" 本组的渠道将被全部移至‘未分组’，"),i("br"),a._v(" "),i("span",{staticStyle:{color:"#EB6751"}},[a._v("本操作不可撤销")]),a._v("，确认删除？\n            ")])],1)]),a._v(" "),i("edit-modal",{ref:"editModal"},[i("Form",{ref:"formData",attrs:{model:a.formData,rules:a.ruleValidate}},[i("FormItem",{attrs:{prop:"orgName",label:"修改分组名称"}},[i("Input",{staticStyle:{width:"280px"},model:{value:a.formData.orgName,callback:function(e){a.$set(a.formData,"orgName","string"==typeof e?e.trim():e)},expression:"formData.orgName"}})],1)],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(g,y,!1,function(e){a("51bk")},"data-v-3f36f528",null).exports,_={props:{rowData:{type:Object,default:function(){return{}}},orgGroupList:{type:Array,default:function(){return[]}},value:{type:Boolean,default:!1}},data:function(){return{ruleValidate:{selectOrgId:[{required:!0,message:this.$t("selectField",{msg:"销售分组"}),trigger:"change"}]},formData:{selectOrgId:""}}},methods:{changeOrg:function(){var t=this;this.$refs.formData.validate(function(e){e&&(t.$emit("move-channel-group",[{saleGroupId:t.formData.selectOrgId,id:t.rowData.id}]),t.$emit("input",!1))})},popperHide:function(){this.$refs.formData.resetFields()}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Poptip",{attrs:{placement:"right",width:"312",value:t.value,transfer:"","popper-class":"select-group"},on:{"on-popper-hide":t.popperHide}},[a("span",{on:{click:function(e){t.$emit("input",!0)}}},[t._v("移至其它分组")]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"name"},[t._v("将所选销售渠道移至分组")]),t._v(" "),a("Form",{ref:"formData",attrs:{model:t.formData,rules:t.ruleValidate}},[a("FormItem",{attrs:{prop:"selectOrgId"}},[a("Select",{staticStyle:{width:"240px","z-index":"2000!important"},attrs:{transfer:""},model:{value:t.formData.selectOrgId,callback:function(e){t.$set(t.formData,"selectOrgId",e)},expression:"formData.selectOrgId"}},t._l(t.orgGroupList,function(e){return a("Option",{key:e.id,attrs:{value:e.id,label:e.groupName}})}))],1)],1),t._v(" "),a("div",{staticClass:"btn-area"},[a("Button",{attrs:{type:"primary"},on:{click:t.changeOrg}},[t._v("确定")]),t._v(" "),a("Button",{attrs:{type:"ghost"},on:{click:function(e){t.$emit("input",!1)}}},[t._v("取消")])],1)],1)])},staticRenderFns:[]};var C=a("VU/8")(_,w,!1,function(e){a("b3yf")},"data-v-d86ba83c",null).exports,k={components:{tableCom:n.a,delModal:o.a,batchOpertate:c,addGroup:h,groupSelect:b,moveGroup:C},data:function(){return{tableData:[],orgGroupList:[],columns:s,pageNo:1,pageSize:10,totalCount:0,currentGroup:{},batchOperate:r.o,saleGroupSelected:[],groupType:""}},methods:{getOrgGroupList:function(){var t=this;i.a.post("getOrgGroupList",{groupType:"sale"}).then(function(e){e.success?t.orgGroupList=e.data?e.data:[]:t.orgGroupList=[]})},queryList:function(){var t=this;i.a.post("getSaleChannelPage",{groupId:"-2"===this.groupType?"":this.groupType,pageNo:this.pageNo,pageSize:this.pageSize}).then(function(e){e.success?(t.tableData=e.data?e.data.data:[],t.totalCount=e.data.totalRow):(t.tableData=[],t.totalCount=0)})},batchMoveChannelGroup:function(e){var t=this;i.a.post("batchMoveChannelGroup",e,{headers:{"Content-Type":"application/json;charset-UTF-8"}}).then(function(e){e.success?(t.$Message.success("移动成功"),t.queryList()):t.$Message.error("移动失败")})},removeGroup:function(e){var t=this;this.$refs.delModal.show({title:"提示",confirmCallback:function(){t.batchMoveChannelGroup(e)}})},selectedChange:function(e){this.saleGroupSelected=e},channelRemove:function(e){e.saleGroupName&&this.removeGroup([{saleGroupId:"",id:e.id}])},handleOutGroup:function(){this.removeGroup(this.saleGroupSelected.map(function(e){return{saleGroupId:"",id:e.id}}))},handleRemoveGroup:function(t){this.batchMoveChannelGroup(this.saleGroupSelected.map(function(e){return{saleGroupId:t,id:e.id}}))},moveChannelGroup:function(e){this.batchMoveChannelGroup(e)}},created:function(){this.getOrgGroupList()}},$={render:function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{staticClass:"saleChannelsGroup"},[i("div",{staticClass:"orgHeader"},[i("add-group",{on:{"fresh-data":a.getOrgGroupList}}),a._v(" "),i("batch-opertate",{attrs:{orgGroupList:a.orgGroupList,saleGroupSelected:a.saleGroupSelected},on:{"handle-out-group":a.handleOutGroup,"handle-remove-group":a.handleRemoveGroup}}),a._v(" "),i("group-select",{attrs:{groupType:a.groupType,orgGroupList:a.orgGroupList},on:{"update:groupType":function(e){a.groupType=e},"fresh-data":a.getOrgGroupList,"fresh-channel":a.queryList}})],1),a._v(" "),i("div",{staticClass:"content"},[a.groupType?i("table-com",{attrs:{"column-data":a.columns,"table-data":a.tableData,border:!0,"page-no-d":a.pageNo,"show-pagination":!0,"page-size-d":a.pageSize,"total-count":a.totalCount,"ofset-height":120},on:{"update:pageNoD":function(e){a.pageNo=e},"update:pageSizeD":function(e){a.pageSize=e},"query-data":a.queryList,"selection-change":a.selectedChange},scopedSlots:a._u([{key:"column0",fn:function(e){return i("el-table-column",{attrs:{label:e.title,type:"selection",width:e.width,"min-width":e.minWidth}})}},{key:"column3",fn:function(e){return i("el-table-column",{attrs:{label:e.title,"show-overflow-tooltip":"",width:e.width,"min-width":e.minWidth},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n                    "+a._s(a.$t("partner"===e.row.type?"partner":"channels"))+"\n                ")]}}])})}},{key:"column4",fn:function(e){return i("el-table-column",{attrs:{label:e.title,"show-overflow-tooltip":"",width:e.width,"min-width":e.minWidth},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n                    "+a._s(e.row.saleGroupName?e.row.saleGroupName:"未分组")+"\n                ")]}}])})}},{key:"column5",fn:function(e){return i("el-table-column",{attrs:{label:e.title,"show-overflow-tooltip":"",width:e.width,"min-width":e.minWidth},scopedSlots:a._u([{key:"default",fn:function(t){return[i("ul",{staticClass:"operate-list"},[i("li",[i("move-group",{attrs:{rowData:t.row,orgGroupList:a.orgGroupList},on:{"move-channel-group":a.moveChannelGroup},model:{value:t.row.visible,callback:function(e){a.$set(t.row,"visible",e)},expression:"scoped.row.visible"}})],1),a._v(" "),i("li",{class:{disabled:!t.row.saleGroupName},on:{click:function(e){a.channelRemove(t.row)}}},[a._v("移出分组")])])]}}])})}}])}):a._e()],1),a._v(" "),i("del-modal",{ref:"delModal"},[i("div",{staticClass:"del-tips"},[i("Icon",{attrs:{type:"help-circled"}}),a._v(" "),i("span",{staticClass:"red-bale"},[a._v("将所选销售渠道从本分组移出后，将列入未分组")])],1)])],1)},staticRenderFns:[]};var D=a("VU/8")(k,$,!1,function(e){a("zMN8")},null,null);t.default=D.exports},zMN8:function(e,t){}});